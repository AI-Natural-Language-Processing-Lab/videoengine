function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+CAv":function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var o=i("mrSG"),s=i("Usal"),n=i("pdjO"),r=i("fXoL"),c=i("VHDF"),a=i("si/t"),d=i("nD3/"),l=i("LEd3"),u=i("+P6t"),b=i("tyNb"),h=i("Hjmt"),f=i("ow1T"),p=i("ofXK"),v=i("RDfn"),g=i("+kG/");function m(e,t){1&e&&(r.Sb(0,"div"),r.Sb(1,"h2",1),r.Ic(2,"Access Denied"),r.Rb(),r.Rb())}function S(e,t){1&e&&r.Nb(0,"app-loader")}function y(e,t){if(1&e){var i=r.Tb();r.Sb(0,"dynamic-modal-form",9),r.ec("OnSubmit",(function(e){return r.yc(i),r.gc(2).SubmitForm(e)})),r.Rb()}if(2&e){var o=r.gc(2);r.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",!1)("showModal",!1)("submitText",o.submitText)}}function R(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"div",2),r.Sb(2,"div",3),r.Sb(3,"div",4),r.Sb(4,"div",5),r.Sb(5,"h4",6),r.Ic(6),r.Rb(),r.Rb(),r.Sb(7,"div",7),r.Gc(8,S,1,0,"app-loader",0),r.Gc(9,y,1,5,"dynamic-modal-form",8),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e){var i=r.gc();r.zb(6),r.Jc(i.formHeading),r.zb(2),r.nc("ngIf",i.showLoader),r.zb(1),r.nc("ngIf",!i.showLoader)}}var I=function(){var e=function(){function e(t,i,o,s,n,r,c,a,d){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=o,this.coreActions=s,this.actions=n,this.route=r,this.permission=c,this.formService=a,this.router=d,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Edit Video Information",this.submitText="Save Changes",this.IsLoaded=!1,this.Categories=[],this.Auth={},this.isAccessGranted=!1,this.isActionGranded=!1,this.Settings={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settings$.subscribe((function(t){e.Settings=t})),this.auth$.subscribe((function(t){if(e.Auth=t,e.isAdmin){e.permission.GrandResourceAccess(!1,"1521395965196","1521396022188",t.Role)&&(e.isAccessGranted=!0,e.permission.GrandResourceAction("1521395965196",t.Role)&&(e.isActionGranded=!0))}else e.isAccessGranted=!0,e.isActionGranded=!0})),this.route.params.subscribe((function(t){e.RecordID=e.coreService.decrypt(t.id),isNaN(e.RecordID)&&(e.RecordID=0),e.RecordID>0?e.Initialize():e.Redirect()})),this.categories$.subscribe((function(t){e.Categories=t,e.updateCategories()})),this.isloaded$.subscribe((function(t){e.IsLoaded=t,e.IsLoaded||e.Redirect()}))}},{key:"Initialize",value:function(){var e=this;this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe((function(t){t.isaccess?e.LoadInfo():e.Redirect()}),(function(t){e.Redirect()})):this.Redirect()}},{key:"Redirect",value:function(){this.router.navigate([this.route_path])}},{key:"LoadInfo",value:function(){var e=this;this.showLoader=!0,this.dataService.GetVideoInfo(this.RecordID).subscribe((function(t){"success"===t.status?e.initializeControls(t.post):(e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),e.initializeControls(e.settingService.getInitObject())),e.showLoader=!1}))}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"initializeControls",value:function(e){this.controls=this.formService.editVideoControls(e,this.Settings,this.isAdmin),this.updateCategories()}},{key:"SubmitForm",value:function(e){var t=this;if(this.isActionGranded){this.showLoader=!0;var i="Added";this.RecordID>0&&(e.id=this.RecordID,i="Updated"),e.userid=this.Auth.User.id,e.categories=this.coreService.returnSelectedCategoryArray(e.categories),e.isadmin=this.isAdmin,this.dataService.ProcessRecord(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.coreActions.Notify({title:"Record "+i+" Successfully",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate(t.isAdmin?[t.route_path+"profile/"+t.coreService.encrypt(e.record.id)]:[t.route_path])),t.showLoader=!1}),(function(e){t.showLoader=!1,t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Mb(c.a),r.Mb(a.a),r.Mb(d.a),r.Mb(l.a),r.Mb(u.a),r.Mb(b.a),r.Mb(h.a),r.Mb(f.a),r.Mb(b.c))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-video-proc"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(e,t){1&e&&(r.Gc(0,m,3,0,"div",0),r.Gc(1,R,10,3,"div",0)),2&e&&(r.nc("ngIf",!t.isAccessGranted),r.zb(1),r.nc("ngIf",t.isAccessGranted))},directives:[p.o,v.a,g.a],encapsulation:2,data:{animation:[n.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["videos","settings"])],e.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},"+K8V":function(e,t,i){"use strict";i.d(t,"a",(function(){return $}));var o=i("mrSG"),s=i("Usal"),n=i("pdjO"),r=i("zIGt"),c=i("YaUu"),a=i("t+rW"),d=i("fXoL"),l=i("si/t"),u=i("nD3/"),b=i("LEd3"),h=i("+P6t"),f=i("tyNb"),p=i("ow1T"),v=i("ofXK"),g=i("9BpC"),m=i("3Pt+"),S=i("RDfn"),y=i("+kG/"),R=function(){return[]};function I(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div"),d.Sb(1,"app-uploader",9),d.ec("OnUploaded",(function(e){return d.yc(i),d.gc(2).OnUploadedVideos(e)})),d.Rb(),d.Rb()}if(2&e){var o=d.gc(2);d.zb(1),d.nc("extensions",o.extensions)("max_concurrent_uploads",o.max_concurrent_uploads)("filesize",o.filesize)("Info",o.Auth.User)("uploadedFiles",d.rc(5,R))}}function w(e,t){if(1&e&&(d.Sb(0,"div",1),d.Sb(1,"h4",13),d.Ic(2),d.Rb(),d.Sb(3,"p",14),d.Ic(4),d.Rb(),d.Sb(5,"div",15),d.Nb(6,"div",16),d.Rb(),d.Rb()),2&e){var i=d.gc().$implicit;d.zb(2),d.Jc(i.pf),d.zb(2),d.Jc(i.edesc),d.zb(2),d.nc("ngClass","completed"===i.isenabled?"progress-bar bg-success":"progress-bar bg-danger")("ngStyle",i.progressStyle)}}function O(e,t){1&e&&(d.Sb(0,"div",1),d.Sb(1,"p"),d.Ic(2,"processing video data..."),d.Rb(),d.Rb())}function C(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",27),d.Sb(1,"a",28),d.ec("click",(function(e){d.yc(i);var o=t.$implicit,s=d.gc(3).$implicit;return d.gc(3).updateSelectedThumb(o,s,e),!1})),d.Nb(2,"img",29),d.Rb(),d.Rb()}if(2&e){var o=t.$implicit,s=d.gc(3).$implicit;d.zb(2),d.qc("src","",s.img_url,"",o.filename,"",d.Bc),d.nc("ngClass",o.selected?"selected":"")}}function _(e,t){if(1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",25),d.Gc(3,C,3,3,"div",26),d.Rb(),d.Rb(),d.Rb()),2&e){var i=d.gc(2).$implicit;d.zb(3),d.nc("ngForOf",i.video_thumbs)}}function A(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",1),d.Sb(1,"div",17),d.Sb(2,"div",18),d.Nb(3,"img",19),d.Rb(),d.Sb(4,"div",20),d.Sb(5,"div",21),d.Sb(6,"input",22),d.ec("ngModelChange",(function(e){return d.yc(i),d.gc().$implicit.title=e})),d.Rb(),d.Rb(),d.Sb(7,"div",21),d.Sb(8,"textarea",23),d.ec("ngModelChange",(function(e){return d.yc(i),d.gc().$implicit.description=e})),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Gc(9,_,4,1,"div",24),d.Rb()}if(2&e){var o=d.gc().$implicit;d.zb(3),d.qc("src","",o.img_url,"",o.defaultImg,"",d.Bc),d.zb(3),d.nc("ngModel",o.title),d.zb(2),d.nc("ngModel",o.description),d.zb(1),d.nc("ngIf",o.video_thumbs.length>0)}}function x(e,t){if(1&e&&(d.Sb(0,"div",11),d.Gc(1,w,7,4,"div",12),d.Gc(2,O,3,0,"div",12),d.Gc(3,A,10,5,"div",12),d.Rb()),2&e){var i=t.$implicit;d.zb(1),d.nc("ngIf",0===i.panelstatus),d.zb(1),d.nc("ngIf",1===i.panelstatus),d.zb(1),d.nc("ngIf",2===i.panelstatus)}}function z(e,t){if(1&e&&(d.Sb(0,"div"),d.Gc(1,x,4,3,"div",10),d.hc(2,"async"),d.Rb()),2&e){var i=d.gc(2);d.zb(1),d.nc("ngForOf",d.ic(2,1,i.uploadedfiles$))}}function k(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",30),d.Sb(1,"button",31),d.ec("click",(function(){return d.yc(i),d.gc(2).nextPanel()})),d.Ic(2,"Next"),d.Rb(),d.Rb()}}function M(e,t){if(1&e&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4",5),d.Ic(3),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,I,2,6,"div",7),d.hc(6,"async"),d.Gc(7,z,3,3,"div",7),d.hc(8,"async"),d.Rb(),d.Gc(9,k,3,0,"div",8),d.Rb()),2&e){var i=d.gc();d.zb(3),d.Jc(i.formHeading),d.zb(2),d.nc("ngIf",0==d.ic(6,4,i.uploadedfiles$).length),d.zb(2),d.nc("ngIf",d.ic(8,6,i.uploadedfiles$).length>0),d.zb(2),d.nc("ngIf",i.showSubmitBtn)}}function F(e,t){1&e&&d.Nb(0,"app-loader")}function L(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",33),d.ec("OnSubmit",(function(e){return d.yc(i),d.gc(2).SubmitForm(e)})),d.Rb()}if(2&e){var o=d.gc(2);d.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",o.showCancel)("cancelText",o.cancelText)("showModal",!1)("submitText",o.submitText)}}function G(e,t){if(1&e&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4"),d.Ic(3,"Update Information"),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,F,1,0,"app-loader",7),d.Gc(6,L,1,6,"dynamic-modal-form",32),d.Rb(),d.Rb()),2&e){var i=d.gc();d.zb(5),d.nc("ngIf",i.showLoader),d.zb(1),d.nc("ngIf",!i.showLoader)}}var $=function(){var e=function(){function e(t,i,o,s,n,r,c){_classCallCheck(this,e),this.dataService=t,this.coreService=i,this.coreActions=o,this.actions=s,this.router=n,this.categoryDataService=r,this.formService=c,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Upload Videos",this.Auth={},this.UploadedFiles=[],this.showSubmitBtn=!1,this.selectedFile={},this.EncodingIndex=0,this.showLoader=!1,this.Panel=0,this.VideoInfo={tags:"",category:""},this.Categories=[],this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.controls=[],this.submitText="Save Changes",this.showCancel=!1,this.cancelText="Back",this.Settings={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.auth$.subscribe((function(t){e.Auth=t})),this.categories$.subscribe((function(t){t.length>0?(e.Categories=t,e.updateCategories()):(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(0))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t,e.updateCategories()),e.showLoader=!1})),this.settings$.subscribe((function(t){e.Settings=t,void 0!==e.Settings.videos.general&&(e.extensions=e.Settings.videos.general.extensions,e.filesize=e.Settings.videos.general.max_size,e.max_concurrent_uploads=e.Settings.videos.general.max_concurrent_uploads)})),this.uploadedfiles$.subscribe((function(t){e.UploadedFiles=t}))}},{key:"OnUploadedVideos",value:function(e){var t=!0,i=!1,o=void 0;try{for(var s,n=e[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.id=this.coreService.makeid(),r.sf=r.filename,r.pf=r.fileIndex+"-"+this.coreService.makeid()+"_pub.mp4",r.isenabled="start",r.errorcode=0,r.progress=0,r.progressStyle={width:"0%"},r.title="",r.description="",r.categories="",r.categories="",r.privacy=0,r.userid=this.Auth.User.id,r.albumid=0,r.video_thumbs=[],r.processID=0,r.panelstatus=0,r.defaultImg=""}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.actions.uploadedVideoFiles(e),this.publish()}},{key:"publish",value:function(){var e=this;this.uploadedfiles$.subscribe((function(t){t.length>0&&(e.EncodingIndex<t.length?(e.selectedFile=t[e.EncodingIndex],e.encodeVideo()):e.finalOutput())}))}},{key:"encodeVideo",value:function(){var e=this;this.selectedFile.isenabled="progress",this.dataService.EncodeVideo({sf:this.selectedFile.sf,pf:this.selectedFile.pf,tp:0,userid:this.Auth.User.id}).subscribe((function(t){parseInt(t.ecode,10)>0?(e.selectedFile.errorcode=parseInt(t.ecode,10),e.selectedFile.edesc=t.edesc,e.EncodingIndex++,e.publish()):(e.selectedFile.processID=t.procid,e.selectedFile.IntervalID=setInterval((function(){e.getProgress()}),1e3)),e.actions.updateVideoFile(e.selectedFile)}),(function(t){e.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})}))}},{key:"getProgress",value:function(){var e=this;this.dataService.EncodeVideo({pid:this.selectedFile.processID,tp:1,userid:this.Auth.User.id}).subscribe((function(t){e.selectedFile.progress=parseInt(t.status,10),e.selectedFile.progressStyle={width:e.selectedFile.progress+"%"},parseInt(t.status,10)>=100&&(e.selectedFile.isenabled="completed",0!==e.selectedFile.IntervalID&&clearInterval(e.selectedFile.IntervalID),e.actions.updateVideoFile(e.selectedFile),e.getInfo())}),(function(t){e.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})}))}},{key:"getInfo",value:function(){var e=this;this.selectedFile.panelstatus=1,this.dataService.EncodeVideo({pid:this.selectedFile.processID,sf:this.selectedFile.sf,pf:this.selectedFile.pf,tp:2,userid:this.Auth.User.id}).subscribe((function(t){if("OK"===t.status){if(e.selectedFile.panelstatus=2,e.selectedFile.errorcode=t.ecode,e.selectedFile.pf=t.fname,e.selectedFile.duration=t.dur,e.selectedFile.dursec=t.dursec,e.selectedFile.tfile=t.tfile,e.selectedFile.edesc=t.edesc,e.selectedFile.isenable=t.isenable,e.selectedFile.fIndex=t.fIndex,e.selectedFile.img_url=t.img_url,void 0!==t.fIndex)for(var i=1;i<=14;i++){var o="",s="";i<=9?(s="00"+i,o=t.fIndex+"00"+i+".jpg"):(s="0"+i,o=t.fIndex+"0"+i+".jpg");var n=!1;8===i?(e.selectedFile.defaultImg=o,n=!0):n=!1,e.selectedFile.video_thumbs.push({id:i,filename:o,fileIndex:"img_"+s,selected:n})}e.actions.updateVideoFile(e.selectedFile)}e.EncodingIndex++,e.publish()}),(function(t){e.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})}))}},{key:"finalOutput",value:function(){console.log("final output triggered"),this.showSubmitBtn=!0}},{key:"updateSelectedThumb",value:function(e,t,i){if(t.defaultImg=e.filename,this.selectedFile.defaultImg=e.filename,this.selectedFile.video_thumbs.length>0){var o=!0,s=!1,n=void 0;try{for(var r,c=this.selectedFile.video_thumbs[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var a=r.value;a.selected=a.id===e.id}}catch(d){s=!0,n=d}finally{try{o||null==c.return||c.return()}finally{if(s)throw n}}}this.actions.updateVideoFile(this.selectedFile),i.stopPropagation()}},{key:"nextPanel",value:function(){this.Panel=1,this.initializeControls({tags:"",category_list:[]})}},{key:"initializeControls",value:function(e){this.controls=this.formService.uploaderOptionControls(e),this.updateCategories()}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"SubmitForm",value:function(e){if(this.UploadedFiles.length>0){var t=!0,i=!1,o=void 0;try{for(var s,n=this.UploadedFiles[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.tags=e.tags,r.categories=this.coreService.returnSelectedCategoryArray(e.categories),r.userid=this.Auth.User.id,r.id=0,r.isenabled=0}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.processVideos(this.UploadedFiles)}}},{key:"processVideos",value:function(e){var t=this;this.showLoader=!0,this.dataService.AddFFMPEGVideos(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.actions.resetPublishing(),t.coreActions.Notify({title:"All uploaded videos processed successfully",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate([t.route_path])),t.showLoader=!1}),(function(e){t.actions.loadEnd(),t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(b.a),d.Mb(h.a),d.Mb(f.c),d.Mb(r.a),d.Mb(p.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-ffmpeg-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([r.a,c.a,a.a])],decls:7,vars:4,consts:[[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card-footer",4,"ngIf"],[3,"extensions","max_concurrent_uploads","filesize","Info","uploadedFiles","OnUploaded"],["class","row m-b-20",4,"ngFor","ngForOf"],[1,"row","m-b-20"],["class","col-md-12",4,"ngIf"],[1,"m-b-5"],["ng-if","file.errorcode > 0",1,"m-b-5"],[1,"progress","m-b-10"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"],[1,"row","m-b-10"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"form-group"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"scrolling-wrapper"],["class","scroll-card m-r-5",4,"ngFor","ngForOf"],[1,"scroll-card","m-r-5"],["href","#",3,"click"],[2,"width","200px","height","auto",3,"ngClass","src"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"h1"),d.Ic(3,"FFMPEG Uploader"),d.Rb(),d.Gc(4,M,10,8,"div",2),d.Gc(5,G,7,2,"div",2),d.hc(6,"async"),d.Rb(),d.Rb()),2&e&&(d.zb(4),d.nc("ngIf",0===t.Panel),d.zb(1),d.nc("ngIf",1===t.Panel&&!d.ic(6,2,t.loading$)))},directives:[v.o,g.a,v.n,v.m,v.p,m.c,m.n,m.q,S.a,y.a],pipes:[v.b],encapsulation:2,data:{animation:[n.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(o.a)([Object(s.e)(["videos","loading"])],e.prototype,"loading$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["videos","uploadedfiles"])],e.prototype,"uploadedfiles$",void 0),Object(o.a)([Object(s.e)(["configuration","configs"])],e.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},"6Fzr":function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var o=i("mrSG"),s=i("Usal"),n=i("pdjO"),r=i("fXoL"),c=i("VHDF"),a=i("si/t"),d=i("nD3/"),l=i("LEd3"),u=i("+P6t"),b=i("tyNb"),h=i("Hjmt"),f=i("ow1T"),p=i("ofXK"),v=i("RDfn");function g(e,t){1&e&&(r.Sb(0,"div"),r.Sb(1,"h2",1),r.Ic(2,"Access Denied"),r.Rb(),r.Rb())}function m(e,t){1&e&&r.Nb(0,"app-loader")}function S(e,t){if(1&e){var i=r.Tb();r.Sb(0,"div",12),r.Sb(1,"a",13),r.ec("click",(function(e){r.yc(i);var o=t.$implicit;return r.gc(3).updateSelectedThumb(o,e),!1})),r.Nb(2,"img",14),r.Rb(),r.Rb()}if(2&e){var o=t.$implicit;r.zb(2),r.oc("src",o.filename,r.Bc),r.nc("ngClass",o.selected?"selected":"")}}function y(e,t){if(1&e){var i=r.Tb();r.Sb(0,"div",5),r.Sb(1,"div",6),r.Sb(2,"h4",7),r.Ic(3),r.Rb(),r.Rb(),r.Sb(4,"div",8),r.Sb(5,"div",2),r.Gc(6,S,3,2,"div",9),r.Rb(),r.Rb(),r.Sb(7,"div",10),r.Sb(8,"button",11),r.ec("click",(function(){return r.yc(i),r.gc(2).updateThumb()})),r.Ic(9," Save Changes "),r.Rb(),r.Rb(),r.Rb()}if(2&e){var o=r.gc(2);r.zb(3),r.Jc(o.formHeading),r.zb(3),r.nc("ngForOf",o.Info.video_thumbs)}}function R(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"div",2),r.Sb(2,"div",3),r.Gc(3,m,1,0,"app-loader",0),r.Gc(4,y,10,2,"div",4),r.Rb(),r.Rb(),r.Rb()),2&e){var i=r.gc();r.zb(3),r.nc("ngIf",i.showLoader),r.zb(1),r.nc("ngIf",!i.showLoader)}}var I=function(){var e=function(){function e(t,i,o,s,n,r,c,a,d){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=o,this.coreActions=s,this.actions=n,this.route=r,this.permission=c,this.formService=a,this.router=d,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.showLoader=!1,this.formHeading="Update Video Cover",this.Info={video_thumbs:[]},this.IsLoaded=!1,this.Auth={},this.isAccessGranted=!1,this.isActionGranded=!1,this.Settings={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settings$.subscribe((function(t){e.Settings=t})),this.auth$.subscribe((function(t){if(e.Auth=t,e.isAdmin){e.permission.GrandResourceAccess(!1,"1521395965196","1521396022188",t.Role)&&(e.isAccessGranted=!0,e.permission.GrandResourceAction("1521395965196",t.Role)&&(e.isActionGranded=!0))}else e.isAccessGranted=!0,e.isActionGranded=!0})),this.route.params.subscribe((function(t){e.RecordID=e.coreService.decrypt(t.id),isNaN(e.RecordID)&&(e.RecordID=0),e.RecordID>0?e.Initialize():e.Redirect()})),this.isloaded$.subscribe((function(t){e.IsLoaded=t,e.IsLoaded||e.Redirect()}))}},{key:"Initialize",value:function(){var e=this;this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe((function(t){t.isaccess?e.LoadInfo():e.Redirect()}),(function(t){e.Redirect()})):this.Redirect()}},{key:"Redirect",value:function(){this.router.navigate([this.route_path])}},{key:"LoadInfo",value:function(){var e=this;this.showLoader=!0,this.dataService.GetVideoInfo(this.RecordID).subscribe((function(t){"success"===t.status?e.initializeControls(t.post):(e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),e.initializeControls(e.settingService.getInitObject())),e.showLoader=!1}))}},{key:"initializeControls",value:function(e){if(this.Info=e,0===this.Info.isexternal){this.Info.video_thumbs=[];for(var t=1;t<=10;t++){var i,o;o=(i=t<=9?this.Info.picturename+"_00"+t+".jpg":this.Info.picturename+"_0"+t+".jpg")===this.Info.thumb_url,this.Info.video_thumbs.push({id:t,filename:i,selected:o})}}}},{key:"updateSelectedThumb",value:function(e,t){if(this.Info.video_thumbs.length>0){var i=!0,o=!1,s=void 0;try{for(var n,r=this.Info.video_thumbs[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var c=n.value;c.selected=c.id===e.id}}catch(a){o=!0,s=a}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}t.stopPropagation()}}},{key:"updateThumb",value:function(){var e=this,t={id:this.Info.id,userid:this.Info.userid},i=!0,o=!1,s=void 0;try{for(var n,r=this.Info.video_thumbs[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var c=n.value;c.selected&&(t.picturename=c.filename)}}catch(a){o=!0,s=a}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}this.dataService.UpdateThumbnail(t).subscribe((function(t){"error"===t.status?e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(e.coreActions.Notify({title:t.message,text:"",css:"bg-success"}),e.router.navigate([e.route_path]))}),(function(t){e.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Mb(c.a),r.Mb(a.a),r.Mb(d.a),r.Mb(l.a),r.Mb(u.a),r.Mb(b.a),r.Mb(h.a),r.Mb(f.a),r.Mb(b.c))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-video-updatethumb"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],["class","col-md-3 m-b-10",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"col-md-3","m-b-10"],["href","#",3,"click"],[3,"ngClass","src"]],template:function(e,t){1&e&&(r.Gc(0,g,3,0,"div",0),r.Gc(1,R,5,2,"div",0)),2&e&&(r.nc("ngIf",!t.isAccessGranted),r.zb(1),r.nc("ngIf",t.isAccessGranted))},directives:[p.o,v.a,p.n,p.m],encapsulation:2,data:{animation:[n.a]}}),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["videos","settings"])],e.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},"9BpC":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("fXoL"),s=i("1pjZ"),n=i("ofXK"),r=i("zRvm");function c(e,t){if(1&e){var i=o.Tb();o.Sb(0,"app-plupload",1),o.ec("onCompletion",(function(e){return o.yc(i),o.gc().filesUploaded(e)})),o.Rb()}if(2&e){var s=o.gc();o.nc("options",s.uploadoptions)}}var a=function(){var e=function(){function e(t){_classCallCheck(this,e),this.config=t,this.uploadedFiles=[],this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.Info={},this.OnUploaded=new o.n,this.onRemove=new o.n,this.InitUploader=!1,this.uploadoptions={handlerpath:this.config.getConfig("host")+"api/ffmpeg/upload",pickfilecaption:"Select Videos",pickbuttoncss:"btn btn-lg btn-success text-center",uploadfilecaption:"Start Uploading",maxfilesize:this.filesize,chunksize:"8mb",headers:{},extensiontitle:"Video Files",extensions:this.extensions,filepath:"",username:"",removehandler:"",maxallowedfiles:this.max_concurrent_uploads,showFileName:!1,showoriginalSize:!1,avatormode:!1,value:[]}}return _createClass(e,[{key:"ngOnChanges",value:function(){this.uploadoptions.username=this.Info.id,void 0!==this.uploadoptions.username&&(this.InitUploader=!0)}},{key:"filesUploaded",value:function(e){console.log("uploaded files"),console.log(e),this.OnUploaded.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Mb(s.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-uploader"]],inputs:{uploadedFiles:"uploadedFiles",extensions:"extensions",filesize:"filesize",max_concurrent_uploads:"max_concurrent_uploads",Info:"Info"},outputs:{OnUploaded:"OnUploaded",onRemove:"onRemove"},features:[o.xb],decls:1,vars:1,consts:[[3,"options","onCompletion",4,"ngIf"],[3,"options","onCompletion"]],template:function(e,t){1&e&&o.Gc(0,c,1,1,"app-plupload",0),2&e&&o.nc("ngIf",t.InitUploader)},directives:[n.o,r.a],encapsulation:2}),e}()},Hk5R:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var o=i("mrSG"),s=i("Usal"),n=i("pdjO"),r=i("fXoL"),c=i("LEd3"),a=i("tyNb"),d=i("nD3/"),l=i("ofXK"),u=function(e){return[e]};function b(e,t){if(1&e&&(r.Sb(0,"div",11),r.Sb(1,"button",12),r.Ic(2," Upload Videos [AWS] "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"aws"))}}function h(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",14),r.Ic(2," Upload Videos [Direct] "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"directuploader/0"))}}function f(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Youtube Videos "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"youtube"))}}function p(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Videos [FFMPEG] "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"ffmpeg"))}}function v(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Movie "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"movie"))}}function g(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Embed Video / Movie "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"embed"))}}function m(e,t){if(1&e&&(r.Sb(0,"div"),r.Gc(1,b,3,3,"div",9),r.hc(2,"async"),r.Gc(3,h,3,3,"div",10),r.hc(4,"async"),r.Gc(5,f,3,3,"div",10),r.hc(6,"async"),r.Gc(7,p,3,3,"div",10),r.hc(8,"async"),r.Gc(9,v,3,3,"div",10),r.hc(10,"async"),r.Gc(11,g,3,3,"div",10),r.hc(12,"async"),r.Rb()),2&e){var i=r.gc(2);r.zb(1),r.nc("ngIf",r.ic(2,6,i.settings$).videos.aws.enable_admin),r.zb(2),r.nc("ngIf",r.ic(4,8,i.settings$).videos.direct.enable_admin),r.zb(2),r.nc("ngIf",r.ic(6,10,i.settings$).videos.youtube.enable_admin),r.zb(2),r.nc("ngIf",r.ic(8,12,i.settings$).videos.ffmpeg.enable_admin),r.zb(2),r.nc("ngIf",r.ic(10,14,i.settings$).videos.movie.enable_admin),r.zb(2),r.nc("ngIf",r.ic(12,16,i.settings$).videos.movie.enable_embed_admin)}}function S(e,t){if(1&e&&(r.Sb(0,"div",11),r.Sb(1,"button",12),r.Ic(2," Upload Videos "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"aws"))}}function y(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",14),r.Ic(2," Upload Videos "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"directuploader/0"))}}function R(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Youtube Videos "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"youtube"))}}function I(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Videos "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"ffmpeg"))}}function w(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Upload Movie "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"movie"))}}function O(e,t){if(1&e&&(r.Sb(0,"div",13),r.Sb(1,"button",15),r.Ic(2," Embed Video / Movie "),r.Rb(),r.Rb()),2&e){var i=r.gc(3);r.zb(1),r.nc("routerLink",r.sc(1,u,i.route_path+"embed"))}}function C(e,t){if(1&e&&(r.Sb(0,"div"),r.Gc(1,S,3,3,"div",9),r.hc(2,"async"),r.Gc(3,y,3,3,"div",10),r.hc(4,"async"),r.Gc(5,R,3,3,"div",10),r.hc(6,"async"),r.Gc(7,I,3,3,"div",10),r.hc(8,"async"),r.Gc(9,w,3,3,"div",10),r.hc(10,"async"),r.Gc(11,O,3,3,"div",10),r.hc(12,"async"),r.Rb()),2&e){var i=r.gc(2);r.zb(1),r.nc("ngIf",r.ic(2,6,i.settings$).videos.aws.enable),r.zb(2),r.nc("ngIf",r.ic(4,8,i.settings$).videos.direct.enable),r.zb(2),r.nc("ngIf",r.ic(6,10,i.settings$).videos.youtube.enable),r.zb(2),r.nc("ngIf",r.ic(8,12,i.settings$).videos.ffmpeg.enable),r.zb(2),r.nc("ngIf",r.ic(10,14,i.settings$).videos.movie.enable),r.zb(2),r.nc("ngIf",r.ic(12,16,i.settings$).videos.movie.enabled_embed)}}function _(e,t){if(1&e&&(r.Sb(0,"div"),r.Gc(1,m,13,18,"div",8),r.Gc(2,C,13,18,"div",8),r.Rb()),2&e){var i=r.gc();r.zb(1),r.nc("ngIf",i.isAdmin),r.zb(1),r.nc("ngIf",!i.isAdmin)}}var A=function(){var e=function(){function e(t,i,o){_classCallCheck(this,e),this.coreActions=t,this.router=i,this.coreService=o,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Choose Upload Option"}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Mb(c.a),r.Mb(a.c),r.Mb(d.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-general-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:11,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[1,"row","justify-content-md-center"],[1,"col-md-6","col-sm-6","col-xs-12"],[4,"ngIf"],["class","m-t-10 text-center",4,"ngIf"],["class","m-t-10",4,"ngIf"],[1,"m-t-10","text-center"],[1,"btn","btn-lg","btn-success","btn-block","text-center","m-b-10",3,"routerLink"],[1,"m-t-10"],[1,"btn","btn-lg","btn-block","btn-success","text-center","m-b-5",3,"routerLink"],[1,"btn","btn-lg","btn-block","btn-success","text-center","m-b-10",3,"routerLink"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.Sb(4,"h4",4),r.Ic(5),r.Rb(),r.Rb(),r.Sb(6,"div",5),r.Sb(7,"div",6),r.Sb(8,"div",7),r.Gc(9,_,3,2,"div",8),r.hc(10,"async"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.zb(5),r.Jc(t.formHeading),r.zb(4),r.nc("ngIf",r.ic(10,2,t.settings$).videos))},directives:[l.o,a.d],pipes:[l.b],encapsulation:2,data:{animation:[n.a]}}),Object(o.a)([Object(s.e)(["configuration","configs"])],e.prototype,"settings$",void 0),e}()},QYT1:function(e,t,i){"use strict";var o=i("mrSG"),s=i("Usal"),n=i("HDdC"),r=i("D0XW"),c=i("Y7HM");function a(e){var t=e.subscriber,i=e.counter,o=e.period;t.next(i),this.schedule({subscriber:t,counter:i+1,period:o},o)}var d=i("pdjO"),l=i("fXoL"),u=i("VHDF"),b=i("si/t"),h=i("nD3/"),f=i("LEd3"),p=i("+P6t"),v=i("Hjmt"),g=i("tyNb"),m=i("ofXK"),S=i("/H0e"),y=i("4HLj"),R=i("pn3A");function I(e,t){1&e&&(l.Sb(0,"div"),l.Sb(1,"h2",3),l.Ic(2,"Access Denied"),l.Rb(),l.Rb())}function w(e,t){if(1&e){var i=l.Tb();l.Sb(0,"div"),l.Sb(1,"div",4),l.Sb(2,"div",5),l.Sb(3,"app-navigation-v2",6),l.ec("Action",(function(e){return l.yc(i),l.gc(2).toolbaraction(e)}))("SearchSelection",(function(e){return l.yc(i),l.gc(2).FindRecords(e)})),l.Rb(),l.Rb(),l.Sb(4,"div",7),l.Sb(5,"app-toolbar-v2",8),l.ec("Action",(function(e){return l.yc(i),l.gc(2).toolbaraction(e)}))("SelectAllCard",(function(e){return l.yc(i),l.gc(2).selectAll(e)})),l.Rb(),l.Sb(6,"div",9),l.Sb(7,"app-video-list",10),l.ec("View",(function(e){return l.yc(i),l.gc(2).toolbaraction(e)}))("SelectedItems",(function(e){return l.yc(i),l.gc(2).getSelectedItems(e)})),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&e){var o=l.gc(2);l.zb(3),l.nc("FilterOptions",o.FilterOptions)("Options",o.SearchOptions),l.zb(2),l.nc("Options",o.ToolbarOptions)("isItemsSelected",o.isItemsSelected),l.zb(2),l.nc("showReportLink",o.showReportLink)("route_path",o.route_path)("PublicView",o.PublicView)("type",o.type)("isAdmin",o.isAdmin)("isActionGranded",o.isActionGranded)}}function O(e,t){if(1&e&&(l.Sb(0,"div",2),l.Gc(1,I,3,0,"div",1),l.Gc(2,w,8,10,"div",1),l.Rb()),2&e){var i=l.gc();l.zb(1),l.nc("ngIf",!i.isAccessGranted),l.zb(1),l.nc("ngIf",i.isAccessGranted)}}function C(e,t){if(1&e){var i=l.Tb();l.Sb(0,"div"),l.Sb(1,"app-navigation-v2",11),l.ec("Action",(function(e){return l.yc(i),l.gc().toolbaraction(e)}))("SearchSelection",(function(e){return l.yc(i),l.gc().FindRecords(e)})),l.Rb(),l.Sb(2,"div",2),l.Sb(3,"div",9),l.Sb(4,"app-toolbar-v2",12),l.ec("Action",(function(e){return l.yc(i),l.gc().toolbaraction(e)}))("SelectAllCard",(function(e){return l.yc(i),l.gc().selectAll(e)})),l.Rb(),l.Sb(5,"app-video-list",13),l.ec("View",(function(e){return l.yc(i),l.gc().toolbaraction(e)}))("SelectedItems",(function(e){return l.yc(i),l.gc().getSelectedItems(e)})),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&e){var o=l.gc();l.zb(1),l.nc("isAdmin",o.isAdmin)("FilterOptions",o.FilterOptions)("Options",o.SearchOptions),l.zb(3),l.nc("isAdmin",o.isAdmin)("Options",o.ToolbarOptions)("isItemsSelected",o.isItemsSelected),l.zb(1),l.nc("showReportLink",o.showReportLink)("route_path",o.route_path)("PublicView",o.PublicView)("type",o.type)("isAdmin",o.isAdmin)}}i.d(t,"a",(function(){return A}));var _,A=((_=function(){function e(t,i,o,s,n,r,c,a){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=o,this.coreActions=s,this.actions=n,this.permission=r,this.router=c,this.route=a,this.isAdmin=!0,this.reload=!1,this.type=0,this.route_path="/videos/",this.PublicView=!1,this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="Videos",this.subheading="Management",this.isItemsSelected=!1,this.IsLoaded=!1,this.Records=0,this.Pagination={},this.Settings={},this.User={},this.showReportLink=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.auth$.subscribe((function(t){e.User=t.User,e.isAdmin?e.permission.GrandResourceAccess(!1,"1521153486644","1521395130448",t.Role)&&(e.isAccessGranted=!0,e.permission.GrandResourceAction("1521153486644",t.Role)&&(e.isActionGranded=!0)):(e.isAccessGranted=!0,e.isActionGranded=!0)})),this.ToolbarOptions=this.settingService.getToolbarOptions(this.type,this.isAdmin),this.SearchOptions=this.settingService.getSearchOptions(this.isAdmin,this.Settings),this.filteroptions$.subscribe((function(t){e.FilterOptions=t,e.reload?(e.loadRecords(t),e.actions.toggleReload(!1)):t.track_filter&&(e.loadRecords(t),t.track_filter=!1,e.actions.updateFilterOptions(t),e.actions.toggleReload(!1))})),this.records$.subscribe((function(t){e.Records=t})),this.pagination$.subscribe((function(t){e.Pagination=t})),this.isItemSelected$.subscribe((function(t){e.isItemsSelected=t})),this.categories$.subscribe((function(t){if(e.isAdmin){var i=!0,o=!1,s=void 0;try{for(var n,r=t[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var c=n.value;e.SearchOptions.categories.push({key:c.id,value:c.title})}}catch(a){o=!0,s=a}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}}})),this.settings$.subscribe((function(t){e.Settings=t,void 0!==e.Settings.general&&(e.SearchOptions.actions=e.settingService.getNavActions(e.isAdmin,e.Settings))})),this.route.params.subscribe((function(t){void 0!==t.tagname&&(e.FilterOptions.tags=t.tagname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.catname&&(e.FilterOptions.categoryname=t.catname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.uname&&(e.FilterOptions.userid=t.uname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.abuse&&("abuse"===t.abuse?(e.FilterOptions.loadabusereports=!0,e.showReportLink=!0):"normallist"===t.abuse&&(e.FilterOptions.loadabusereports=!1,e.showReportLink=!1),e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions))})),this.isloaded$.subscribe((function(t){e.IsLoaded=t,!t||e.reload?e.loadRecords(e.FilterOptions):e.refreshStats()})),this.triggerreload$.subscribe((function(t){if(t){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a;return(!Object(c.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=r.a),new n.a((function(i){return i.add(t.schedule(a,e,{subscriber:i,counter:0,period:e})),i}))}(1e4);e.interval_subscribe=i.subscribe((function(t){console.log("HITTT>>>>"),e.loadRecords(e.FilterOptions)}))}else e.interval_subscribe&&e.interval_subscribe.unsubscribe()}))}},{key:"loadRecords",value:function(e){switch(this.type){case 0:e.loadliked=!1,e.loadfavorites=!1,e.loadplaylist=!1;break;case 1:e.loadliked=!1,e.loadplaylist=!1,void 0!==e.userid&&""!==e.userid&&(e.loadfavorites=!0);break;case 2:e.loadfavorites=!1,e.loadplaylist=!1,void 0!==e.userid&&""!==e.userid&&(e.loadliked=!0);break;case 2:e.loadliked=!1,e.loadfavorites=!1,e.loadplaylist=!0}this.coreService.renderAbuseReportBtn(this.SearchOptions.actions,e.loadabusereports),this.PublicView&&(e.ispublic=!0),this.dataService.LoadRecords(e)}},{key:"selectAll",value:function(e){this.actions.selectAll({type:this.type,checked:e})}},{key:"toolbaraction",value:function(e){if(this.isActionGranded)switch(e.action){case"upload":return void this.router.navigate([this.route_path+"/uploads"]);case"abuse":return void this.router.navigate([this.route_path+"filter/abuse"]);case"normallist":return void this.router.navigate([this.route_path+"filter/normallist"]);case"reports":return void this.router.navigate([this.route_path+"reports"]);case"m_markas":return void this.ProcessActions(e.value);case"f_type":return void this.actions.applyFilter({attr:"type",value:e.value});case"f_isapproved":this.actions.applyFilter({attr:"isapproved",value:e.value});break;case"f_status":this.actions.applyFilter({attr:"isenabled",value:e.value});break;case"f_featured":this.actions.applyFilter({attr:"isfeatured",value:e.value});break;case"f_adult":this.actions.applyFilter({attr:"isadult",value:e.value});break;case"pagesize":this.actions.applyFilter({attr:"pagesize",value:e.value});break;case"f_private":this.actions.applyFilter({attr:"privacy",value:e.value});break;case"m_filter":this.actions.applyFilter({attr:"datefilter",value:e.value});break;case"sort":this.actions.applyFilter({attr:"direction",value:e.value})}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}},{key:"FindRecords",value:function(e){var t=e.filters;t.tags="",t.categories_str="",t.username="",t.pagenumber=1,t.track_filter=!0,this.actions.updateFilterOptions(t)}},{key:"getSelectedItems",value:function(e){this.SelectedItems=e,this.isItemsSelected=this.SelectedItems.length>0}},{key:"ProcessActions",value:function(e){if(this.SelectedItems.length>0){var t=!0,i=!1,o=void 0;try{for(var s,n=this.SelectedItems[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.actionstatus=e.actionstatus,this.type>0&&(r.userid=this.User.id)}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.dataService.ProcessActions(this.SelectedItems,e,this.type)}}},{key:"refreshStats",value:function(){this.actions.refresh_pagination({type:this.type,totalrecords:this.Records,pagesize:this.FilterOptions.pagesize}),this.coreActions.refreshListStats({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage})}}]),e}()).\u0275fac=function(e){return new(e||_)(l.Mb(u.a),l.Mb(b.a),l.Mb(h.a),l.Mb(f.a),l.Mb(p.a),l.Mb(v.a),l.Mb(g.c),l.Mb(g.a))},_.\u0275cmp=l.Gb({type:_,selectors:[["app-mainvideo-list"]],hostVars:1,hostBindings:function(e,t){2&e&&l.Mc("@fadeInAnimation",void 0)},inputs:{isAdmin:"isAdmin",reload:"reload",type:"type",route_path:"route_path",PublicView:"PublicView"},decls:2,vars:2,consts:[["class","card",4,"ngIf"],[4,"ngIf"],[1,"card"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-3"],[3,"FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"showReportLink","route_path","PublicView","type","isAdmin","isActionGranded","View","SelectedItems"],[3,"isAdmin","FilterOptions","Options","Action","SearchSelection"],[3,"isAdmin","Options","isItemsSelected","Action","SelectAllCard"],[3,"showReportLink","route_path","PublicView","type","isAdmin","View","SelectedItems"]],template:function(e,t){1&e&&(l.Gc(0,O,3,2,"div",0),l.Gc(1,C,6,11,"div",1)),2&e&&(l.nc("ngIf",t.isAdmin),l.zb(1),l.nc("ngIf",!t.isAdmin))},directives:[m.o,S.a,y.a,R.a],encapsulation:2,data:{animation:[d.a]}}),Object(o.a)([Object(s.e)(["videos","filteroptions"])],_.prototype,"filteroptions$",void 0),Object(o.a)([Object(s.e)(["videos","categories"])],_.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["videos","itemsselected"])],_.prototype,"isItemSelected$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],_.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["videos","records"])],_.prototype,"records$",void 0),Object(o.a)([Object(s.e)(["videos","pagination"])],_.prototype,"pagination$",void 0),Object(o.a)([Object(s.e)(["videos","settings"])],_.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],_.prototype,"auth$",void 0),Object(o.a)([Object(s.e)(["videos","triggerreload"])],_.prototype,"triggerreload$",void 0),_)},eXLi:function(e,t,i){"use strict";i.d(t,"a",(function(){return M}));var o=i("mrSG"),s=i("Usal"),n=i("zIGt"),r=i("YaUu"),c=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("si/t"),u=i("LEd3"),b=i("+P6t"),h=i("tyNb"),f=i("ow1T"),p=i("nD3/"),v=i("1pjZ"),g=i("ofXK"),m=i("9BpC"),S=i("3Pt+"),y=i("RDfn"),R=i("+kG/"),I=function(){return[]};function w(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div"),d.Sb(1,"app-uploader",9),d.ec("OnUploaded",(function(e){return d.yc(i),d.gc(2).OnUploadedVideos(e)})),d.Rb(),d.Rb()}if(2&e){var o=d.gc(2);d.zb(1),d.nc("Info",o.Auth.User)("extensions",o.extensions)("max_concurrent_uploads",o.max_concurrent_uploads)("filesize",o.filesize)("uploadedFiles",d.rc(5,I))}}function O(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",11),d.Sb(1,"div",0),d.Sb(2,"div",1),d.Sb(3,"h4"),d.Ic(4),d.Rb(),d.Rb(),d.Rb(),d.Sb(5,"div",0),d.Sb(6,"div",12),d.Nb(7,"img",13),d.Rb(),d.Sb(8,"div",14),d.Sb(9,"div",15),d.Sb(10,"input",16),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.title=e})),d.Rb(),d.Rb(),d.Sb(11,"div",15),d.Sb(12,"textarea",17),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.description=e})),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&e){var o=t.$implicit,s=d.gc(3);d.zb(4),d.Jc(o.filename),d.zb(3),d.pc("src","",s.config.getGlobalVar("img_directory"),"video-thumbnail.jpg",d.Bc),d.zb(3),d.nc("ngModel",o.title),d.zb(2),d.nc("ngModel",o.description)}}function C(e,t){if(1&e&&(d.Sb(0,"div"),d.Gc(1,O,13,4,"div",10),d.hc(2,"async"),d.Rb()),2&e){var i=d.gc(2);d.zb(1),d.nc("ngForOf",d.ic(2,1,i.uploadedfiles$))}}function _(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",18),d.Sb(1,"button",19),d.ec("click",(function(){return d.yc(i),d.gc(2).nextPanel()})),d.Ic(2,"Next"),d.Rb(),d.Rb()}}function A(e,t){if(1&e&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4",5),d.Ic(3),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,w,2,6,"div",7),d.hc(6,"async"),d.Gc(7,C,3,3,"div",7),d.hc(8,"async"),d.Rb(),d.Gc(9,_,3,0,"div",8),d.hc(10,"async"),d.Rb()),2&e){var i=d.gc();d.zb(3),d.Jc(i.formHeading),d.zb(2),d.nc("ngIf",0===d.ic(6,4,i.uploadedfiles$).length),d.zb(2),d.nc("ngIf",d.ic(8,6,i.uploadedfiles$).length>0),d.zb(2),d.nc("ngIf",d.ic(10,8,i.uploadedfiles$).length>0)}}function x(e,t){1&e&&d.Nb(0,"app-loader")}function z(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",21),d.ec("OnSubmit",(function(e){return d.yc(i),d.gc(2).SubmitForm(e)}))("OnClose",(function(e){return d.yc(i),d.gc(2).Cancel(e)})),d.Rb()}if(2&e){var o=d.gc(2);d.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",o.showCancel)("cancelText",o.cancelText)("showModal",!1)("submitText",o.submitText)}}function k(e,t){if(1&e&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4"),d.Ic(3,"Update Information"),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,x,1,0,"app-loader",7),d.Gc(6,z,1,6,"dynamic-modal-form",20),d.Rb(),d.Rb()),2&e){var i=d.gc();d.zb(5),d.nc("ngIf",i.showLoader),d.zb(1),d.nc("ngIf",!i.showLoader)}}var M=function(){var e=function(){function e(t,i,o,s,n,r,c,a){_classCallCheck(this,e),this.dataService=t,this.coreActions=i,this.actions=o,this.router=s,this.formService=n,this.coreService=r,this.categoryDataService=c,this.config=a,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Upload Videos",this.Auth={},this.showLoader=!1,this.Panel=0,this.VideoInfo={tags:"",category:""},this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.Categories=[],this.controls=[],this.submitText="Save Changes",this.showCancel=!0,this.cancelText="Back",this.Settings={},this.UploadedFiles=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.auth$.subscribe((function(t){e.Auth=t})),this.categories$.subscribe((function(t){t.length>0?e.Categories=t:(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(0))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t),e.showLoader=!1})),this.settings$.subscribe((function(t){e.Settings=t,void 0!==e.Settings.videos.general&&(e.extensions=e.Settings.videos.general.extensions,e.filesize=e.Settings.videos.general.max_size,e.max_concurrent_uploads=e.Settings.videos.general.max_concurrent_uploads)})),this.uploadedfiles$.subscribe((function(t){e.UploadedFiles=t}))}},{key:"OnUploadedVideos",value:function(e){var t=!0,i=!1,o=void 0;try{for(var s,n=e[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.id=0,r.title="",r.sf=r.filename,r.description="",r.categories="",r.privacy=0,r.userid=this.Auth.User.id,r.albumid=0,r.type=0}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.actions.uploadedVideoFiles(e)}},{key:"nextPanel",value:function(){this.Panel=1,this.initializeControls({tags:"",category_list:[]})}},{key:"Cancel",value:function(e){this.Panel=0}},{key:"initializeControls",value:function(e){this.controls=this.formService.uploaderOptionControls(e),this.updateCategories()}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"SubmitForm",value:function(e){if(this.UploadedFiles.length>0){var t=!0,i=!1,o=void 0;try{for(var s,n=this.UploadedFiles[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.tags=e.tags,r.categories=this.coreService.returnSelectedCategoryArray(e.categories),r.userid=this.Auth.User.id}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.processVideos(this.UploadedFiles)}}},{key:"processVideos",value:function(e){var t=this;this.showLoader=!0,this.dataService.AddAWSVideos(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.actions.resetPublishing(),t.coreActions.Notify({title:"Uploaded videos submitted for processing",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate([t.route_path])),t.showLoader=!1}),(function(e){t.actions.loadEnd(),t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(b.a),d.Mb(h.c),d.Mb(f.a),d.Mb(p.a),d.Mb(n.a),d.Mb(v.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-aws-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([n.a,r.a,c.a])],decls:5,vars:4,consts:[[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card-footer",4,"ngIf"],[3,"Info","extensions","max_concurrent_uploads","filesize","uploadedFiles","OnUploaded"],["class","m-b-10",4,"ngFor","ngForOf"],[1,"m-b-10"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"form-group"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit","OnClose",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit","OnClose"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Gc(2,A,11,10,"div",2),d.Gc(3,k,7,2,"div",2),d.hc(4,"async"),d.Rb(),d.Rb()),2&e&&(d.zb(2),d.nc("ngIf",0===t.Panel),d.zb(1),d.nc("ngIf",1===t.Panel&&!d.ic(4,2,t.loading$)))},directives:[g.o,m.a,g.n,S.c,S.n,S.q,y.a,R.a],pipes:[g.b],encapsulation:2,data:{animation:[a.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(o.a)([Object(s.e)(["videos","loading"])],e.prototype,"loading$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["videos","uploadedfiles"])],e.prototype,"uploadedfiles$",void 0),Object(o.a)([Object(s.e)(["configuration","configs"])],e.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},jL45:function(e,t,i){"use strict";i.d(t,"a",(function(){return G}));var o=i("mrSG"),s=i("Usal"),n=i("pdjO"),r=i("zIGt"),c=i("YaUu"),a=i("t+rW"),d=i("fXoL"),l=i("si/t"),u=i("nD3/"),b=i("LEd3"),h=i("+P6t"),f=i("tyNb"),p=i("ow1T"),v=i("ofXK"),g=i("RDfn"),m=i("3Pt+"),S=i("+kG/");function y(e,t){1&e&&d.Nb(0,"app-loader")}function R(e,t){if(1&e){var i=d.Tb();d.Sb(0,"a",15),d.ec("click",(function(e){return d.yc(i),d.gc(2).showAdvanceOptions(e),!1})),d.Ic(1,"Advance Options"),d.Rb()}}function I(e,t){if(1&e&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&e){var i=t.$implicit;d.oc("value",i.id),d.zb(1),d.Jc(i.title)}}function w(e,t){if(1&e&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&e){var i=t.$implicit;d.oc("value",i.id),d.zb(1),d.Jc(i.title)}}function O(e,t){if(1&e&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&e){var i=t.$implicit;d.oc("value",i.id),d.zb(1),d.Jc(i.title)}}function C(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",16),d.Sb(1,"div",1),d.Sb(2,"div",17),d.Sb(3,"input",18),d.ec("ngModelChange",(function(e){return d.yc(i),d.gc(2).YoutubeQuery.username=e})),d.Rb(),d.Rb(),d.Sb(4,"div",17),d.Sb(5,"select",19),d.ec("ngModelChange",(function(e){return d.yc(i),d.gc(2).YoutubeQuery.youtubecategory=e})),d.Sb(6,"option",20),d.Ic(7,"Select Youtube Category"),d.Rb(),d.Gc(8,I,2,2,"option",21),d.hc(9,"async"),d.Rb(),d.Rb(),d.Sb(10,"div",17),d.Sb(11,"select",22),d.Gc(12,w,2,2,"option",21),d.Rb(),d.Rb(),d.Sb(13,"div",17),d.Sb(14,"select",23),d.Gc(15,O,2,2,"option",21),d.Rb(),d.Rb(),d.Sb(16,"div",17),d.Sb(17,"button",24),d.ec("click",(function(){return d.yc(i),d.gc(2).submitYoutube()})),d.Ic(18," Search "),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&e){var o=d.gc(2);d.zb(3),d.nc("ngModel",o.YoutubeQuery.username),d.zb(2),d.nc("ngModel",o.YoutubeQuery.youtubecategory),d.zb(3),d.nc("ngForOf",d.ic(9,5,o.YoutubeCategories$).youtubeCategories),d.zb(4),d.nc("ngForOf",o.YoutubeOrderList),d.zb(3),d.nc("ngForOf",o.YoutubeDateList)}}function _(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",0),d.Sb(2,"div",8),d.Sb(3,"div",9),d.Sb(4,"input",10),d.ec("ngModelChange",(function(e){return d.yc(i),d.gc().YoutubeQuery.term=e})),d.Rb(),d.Sb(5,"span",11),d.Sb(6,"button",12),d.ec("click",(function(){return d.yc(i),d.gc().submitYoutube()})),d.Ic(7," Search "),d.Rb(),d.Rb(),d.Rb(),d.Gc(8,R,2,0,"a",13),d.Rb(),d.Rb(),d.Gc(9,C,19,7,"div",14),d.Rb()}if(2&e){var o=d.gc();d.zb(4),d.nc("ngModel",o.YoutubeQuery.term),d.zb(4),d.nc("ngIf",!o.YoutubeQuery.advanceoption),d.zb(1),d.nc("ngIf",o.YoutubeQuery.advanceoption)}}function A(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",0),d.Sb(1,"div",30),d.Nb(2,"img",31),d.Rb(),d.Sb(3,"div",32),d.Sb(4,"button",33),d.ec("click",(function(e){d.yc(i);var o=t.index;return d.gc(3).removeYt_Video(o,e),!1})),d.Nb(5,"i",34),d.Rb(),d.Sb(6,"div",17),d.Sb(7,"input",35),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.title=e})),d.Rb(),d.Rb(),d.Sb(8,"div",17),d.Sb(9,"textarea",36),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.description=e})),d.Rb(),d.Rb(),d.Sb(10,"div",17),d.Sb(11,"input",37),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.duration=e})),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&e){var o=t.$implicit;d.zb(2),d.oc("src",o.preview_url,d.Bc),d.zb(5),d.nc("ngModel",o.title),d.zb(2),d.nc("ngModel",o.description),d.zb(2),d.nc("ngModel",o.duration)}}function x(e,t){if(1&e&&(d.Sb(0,"div",5),d.Gc(1,A,12,4,"div",29),d.Rb()),2&e){var i=d.gc(2);d.zb(1),d.nc("ngForOf",i.YoutubeSearchResult)}}function z(e,t){1&e&&d.Nb(0,"app-loader")}function k(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",39),d.ec("OnSubmit",(function(e){return d.yc(i),d.gc(3).SubmitForm(e)})),d.Rb()}if(2&e){var o=d.gc(3);d.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",!1)("showModal",!1)("submitText",o.submitText)}}function M(e,t){if(1&e&&(d.Sb(0,"div",5),d.Gc(1,z,1,0,"app-loader",6),d.Gc(2,k,1,5,"dynamic-modal-form",38),d.Rb()),2&e){var i=d.gc(2);d.zb(1),d.nc("ngIf",i.showLoader),d.zb(1),d.nc("ngIf",!i.showLoader)}}function F(e,t){if(1&e){var i=d.Tb();d.Sb(0,"button",24),d.ec("click",(function(){return d.yc(i),d.gc(2).nextstep()})),d.Ic(1," Next "),d.Rb()}}function L(e,t){if(1&e&&(d.Sb(0,"div",2),d.Sb(1,"div",3),d.Sb(2,"h4",4),d.Ic(3,"Search Result"),d.Rb(),d.Rb(),d.Gc(4,x,2,1,"div",26),d.Gc(5,M,3,2,"div",26),d.Sb(6,"div",27),d.Gc(7,F,2,0,"button",28),d.Rb(),d.Rb()),2&e){var i=d.gc();d.zb(4),d.nc("ngIf",i.step1),d.zb(1),d.nc("ngIf",i.step2),d.zb(2),d.nc("ngIf",i.step1)}}var G=function(){var e=function(){function e(t,i,o,s,n,r,c){_classCallCheck(this,e),this.dataService=t,this.coreService=i,this.coreActions=o,this.actions=s,this.router=n,this.categoryDataService=r,this.formService=c,this.isAdmin=!0,this.route_path="/videos/",this.YoutubeQuery={term:"",advanceoption:!1,userid:"",youtubecategory:"",order:0,date:0},this.YoutubeOrderList=[{id:0,title:"Date"},{id:1,title:"Rating"},{id:2,title:"Relevance"},{id:3,title:"Title"},{id:4,title:"VideoCount"},{id:5,title:"ViewCount"}],this.YoutubeDateList=[{id:3,title:"All Time"},{id:0,title:"Today"},{id:1,title:"This Week"},{id:2,title:"This Month"}],this.YoutubeResult={tags:"",category:""},this.YoutubeSearchResult=[],this.formHeading="Upload Videos",this.IsLoaded=!1,this.controls=[],this.step1=!0,this.step2=!1,this.Auth={},this.Categories=[],this.showLoader=!1,this.submitText="Save Changes"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dataService.LoadYoutubeCategories(),this.isloaded$.subscribe((function(t){e.IsLoaded=t,e.IsLoaded||e.router.navigate([e.route_path])})),this.auth$.subscribe((function(t){e.Auth=t,e.YoutubeQuery.userid=e.Auth.User.id})),this.YoutubeSearchResult$.subscribe((function(t){e.YoutubeSearchResult=t})),this.categories$.subscribe((function(t){t.length>0?(e.Categories=t,e.updateCategories()):(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(0))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t,e.updateCategories()),e.showLoader=!1}))}},{key:"submitYoutube",value:function(){this.dataService.SearchYoutube(this.YoutubeQuery)}},{key:"showAdvanceOptions",value:function(e){this.YoutubeQuery.advanceoption=!0,e.stopPropagation()}},{key:"nextstep",value:function(){this.step1=!1,this.step2=!0,this.initializeControls({tags:"",category_list:[]})}},{key:"initializeControls",value:function(e){this.controls=this.formService.uploaderOptionControls(e),this.updateCategories()}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"SubmitForm",value:function(e){var t=this;if(0!==this.YoutubeSearchResult.length){this.showLoader=!0;var i=!0,o=!1,s=void 0;try{for(var n,r=this.YoutubeSearchResult[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var c=n.value;c.tags=e.tags,c.categories=this.coreService.returnSelectedCategoryArray(e.categories),c.userid=this.Auth.User.id}}catch(a){o=!0,s=a}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}this.dataService.AddYoutubeVideos(this.YoutubeSearchResult).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.actions.cleanupYoutubeSearchResult(),t.coreActions.Notify({title:"Videos processed successfully",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate([t.route_path])),t.showLoader=!1}),(function(e){t.actions.loadEnd(),t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}else this.coreActions.Notify({title:"Please select atleast one video to proceed",text:"",css:"bg-danger"})}},{key:"removeYt_Video",value:function(e,t){e>-1&&(console.log("splice hit"),this.YoutubeSearchResult.splice(e,1)),t.stopPropagation=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(b.a),d.Mb(h.a),d.Mb(f.c),d.Mb(r.a),d.Mb(p.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-youtube-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([r.a,c.a,a.a])],decls:12,vars:8,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"col-lg-12"],[1,"input-group"],["type","text","placeholder","Enter youtube url or search term",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-btn"],["type","button",1,"btn","btn-success",3,"click"],["href","",3,"click",4,"ngIf"],["class","row m-t-10",4,"ngIf"],["href","",3,"click"],[1,"row","m-t-10"],[1,"form-group"],["type","text","placeholder","Enter username",1,"form-control",3,"ngModel","ngModelChange"],["chosen","{width: '100%'}",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["ng-model","YoutubeQuery.order",1,"form-control"],["ng-model","YoutubeQuery.date",1,"form-control"],[1,"btn","btn-primary",3,"click"],[3,"value"],["class","card-body",4,"ngIf"],[1,"card-footer"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"float-right",3,"click"],[1,"fa","fa-times"],["type","text","placeholder","Enter title",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter duration",1,"form-control",3,"ngModel","ngModelChange"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Sb(4,"h4",4),d.Ic(5),d.Rb(),d.Rb(),d.Sb(6,"div",5),d.Gc(7,y,1,0,"app-loader",6),d.hc(8,"async"),d.Gc(9,_,10,3,"div",6),d.hc(10,"async"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Gc(11,L,8,3,"div",7)),2&e&&(d.zb(5),d.Jc(t.formHeading),d.zb(2),d.nc("ngIf",d.ic(8,4,t.loading$)),d.zb(2),d.nc("ngIf",!d.ic(10,6,t.loading$)),d.zb(2),d.nc("ngIf",t.YoutubeSearchResult.length>0))},directives:[v.o,g.a,m.c,m.n,m.q,m.v,m.s,m.x,v.n,S.a],pipes:[v.b],encapsulation:2,data:{animation:[n.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(o.a)([Object(s.e)(["videos","yt_categories"])],e.prototype,"YoutubeCategories$",void 0),Object(o.a)([Object(s.e)(["videos","yt_result"])],e.prototype,"YoutubeSearchResult$",void 0),Object(o.a)([Object(s.e)(["videos","loading"])],e.prototype,"loading$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},v6bp:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var o=i("mrSG"),s=i("Usal"),n=i("zIGt"),r=i("YaUu"),c=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("si/t"),u=i("LEd3"),b=i("+P6t"),h=i("tyNb"),f=i("ow1T"),p=i("nD3/"),v=i("1pjZ"),g=i("ofXK"),m=i("RDfn"),S=i("+kG/");function y(e,t){1&e&&d.Nb(0,"app-loader")}function R(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",7),d.ec("OnSubmit",(function(e){return d.yc(i),d.gc().SubmitForm(e)})),d.Rb()}if(2&e){var o=d.gc();d.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",o.showCancel)("cancelText",o.cancelText)("showModal",!1)("submitText",o.submitText)}}var I=function(){var e=function(){function e(t,i,o,s,n,r,c,a){_classCallCheck(this,e),this.dataService=t,this.coreActions=i,this.actions=o,this.router=s,this.formService=n,this.coreService=r,this.categoryDataService=c,this.config=a,this.isAdmin=!0,this.route_path="/videos/",this.uploadType=0,this.formHeading="Upload Movie",this.Auth={},this.showLoader=!1,this.Categories=[],this.controls=[],this.submitText="Save Changes",this.showCancel=!1,this.cancelText="Cancel",this.Settings={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.auth$.subscribe((function(t){e.Auth=t})),this.categories$.subscribe((function(t){t.length>0?(e.Categories=t,e.initializeControls()):(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(0))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t,e.initializeControls()),e.showLoader=!1})),this.settings$.subscribe((function(t){e.Settings=t}))}},{key:"initializeControls",value:function(){0===this.uploadType?this.initializeMovieControls():this.initializeEmbedControls(),this.updateCategories()}},{key:"initializeMovieControls",value:function(){this.controls=this.formService.uploadMovieControls({title:"",description:"",tags:"",category_list:[],duration:"",movietype:0,preview_url:"",pub_url:"",org_url:"",thumb_url:"",coverurl:"",price:0,isapproved:0})}},{key:"initializeEmbedControls",value:function(){this.controls=this.formService.embedVideoControls({title:"",description:"",tags:"",category_list:[],movietype:0,embed_script:"",isapproved:0,thumb_url:""})}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"SubmitForm",value:function(e){this.showLoader=!0,e.userid=this.Auth.User.id,e.categories=this.coreService.returnSelectedCategoryArray(e.categories),0===this.uploadType?this.SubmitMovieForm(e):this.SubmitEmbedForm(e)}},{key:"SubmitMovieForm",value:function(e){var t=this;this.dataService.AddMovie(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.actions.resetPublishing(),t.coreActions.Notify({title:"Movie Information Submitted",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate([t.route_path])),t.showLoader=!1}),(function(e){t.actions.loadEnd(),t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}},{key:"SubmitEmbedForm",value:function(e){var t=this;e.isexternal=1,this.dataService.EmbedVideo(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.actions.resetPublishing(),t.coreActions.Notify({title:"Video Submitted",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate([t.route_path])),t.showLoader=!1}),(function(e){t.actions.loadEnd(),t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(b.a),d.Mb(h.c),d.Mb(f.a),d.Mb(p.a),d.Mb(n.a),d.Mb(v.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-movie-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path",uploadType:"uploadType"},features:[d.yb([n.a,r.a,c.a])],decls:9,vars:3,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Sb(4,"h4"),d.Ic(5),d.Rb(),d.Rb(),d.Sb(6,"div",4),d.Gc(7,y,1,0,"app-loader",5),d.Gc(8,R,1,6,"dynamic-modal-form",6),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&e&&(d.zb(5),d.Jc(t.formHeading),d.zb(2),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader))},directives:[g.o,m.a,S.a],encapsulation:2,data:{animation:[a.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(o.a)([Object(s.e)(["configuration","configs"])],e.prototype,"settings$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},wHF2:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var o=i("mrSG"),s=i("Usal"),n=i("zIGt"),r=i("YaUu"),c=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("VHDF"),u=i("si/t"),b=i("nD3/"),h=i("LEd3"),f=i("+P6t"),p=i("tyNb"),v=i("ow1T"),g=i("1pjZ"),m=i("ofXK"),S=i("RDfn"),y=i("+kG/"),R=i("3Pt+");function I(e,t){1&e&&d.Nb(0,"app-loader")}function w(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",9),d.ec("OnSubmit",(function(e){return d.yc(i),d.gc(3).SubmitForm(e)})),d.Rb()}if(2&e){var o=d.gc(3);d.nc("controls",o.controls)("showLoader",o.showLoader)("showCancel",!1)("showModal",!1)("submitText",o.submitText)}}function O(e,t){if(1&e&&(d.Sb(0,"div"),d.Gc(1,w,1,5,"dynamic-modal-form",8),d.Rb()),2&e){var i=d.gc(2);d.zb(1),d.nc("ngIf",!i.showLoader)}}function C(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",28),d.Nb(2,"img",29),d.Sb(3,"div",6),d.Sb(4,"p",30),d.Sb(5,"a",31),d.ec("click",(function(e){d.yc(i);var o=t.index,s=d.gc().$implicit;return d.gc(3).delete(s,o,e),!1})),d.Nb(6,"i",32),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&e){var o=t.$implicit;d.zb(2),d.oc("src",o.url,d.Bc),d.oc("alt",o.fname)}}function _(e,t){if(1&e){var i=d.Tb();d.Sb(0,"tr"),d.Sb(1,"td",13),d.Sb(2,"div",14),d.Sb(3,"video",15),d.Nb(4,"source",16),d.Rb(),d.Rb(),d.Sb(5,"div",14),d.Sb(6,"button",17),d.ec("click",(function(){d.yc(i);var e=t.$implicit;return d.gc(3).captureDuration(e)})),d.Ic(7," Capture Duration "),d.Rb(),d.Rb(),d.Sb(8,"div",18),d.Sb(9,"input",19),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.thumb_url=e})),d.Rb(),d.Rb(),d.Sb(10,"div",18),d.Sb(11,"input",20),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.title=e})),d.Rb(),d.Rb(),d.Sb(12,"div",18),d.Sb(13,"textarea",21),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.description=e})),d.Rb(),d.Rb(),d.Sb(14,"div",18),d.Sb(15,"input",22),d.ec("ngModelChange",(function(e){return d.yc(i),t.$implicit.duration=e})),d.Rb(),d.Rb(),d.Sb(16,"p",23),d.Sb(17,"a",24),d.ec("click",(function(e){d.yc(i);var o=t.index;return d.gc(3).remove(o,e),!1})),d.Nb(18,"i",25),d.Rb(),d.Rb(),d.Rb(),d.Sb(19,"td",26),d.Nb(20,"div",27),d.Gc(21,C,7,2,"div",11),d.Rb(),d.Rb()}if(2&e){var o=t.$implicit;d.zb(3),d.pc("id","vd_",o.id,""),d.zb(1),d.oc("src",o.url,d.Bc),d.zb(5),d.nc("ngModel",o.thumb_url),d.zb(2),d.nc("ngModel",o.title),d.zb(2),d.nc("ngModel",o.description),d.zb(2),d.nc("ngModel",o.duration),d.zb(5),d.pc("id","view_",o.id,""),d.zb(1),d.nc("ngForOf",o.video_thumbs)}}function A(e,t){if(1&e){var i=d.Tb();d.Sb(0,"div",33),d.Sb(1,"button",34),d.ec("click",(function(){return d.yc(i),d.gc(3).saveChanges()})),d.Ic(2," Save Changes "),d.Rb(),d.Rb()}}function x(e,t){if(1&e&&(d.Sb(0,"div"),d.Sb(1,"h3"),d.Ic(2,"Uploaded Video Processing"),d.Rb(),d.Sb(3,"table",10),d.Gc(4,_,22,8,"tr",11),d.Rb(),d.Gc(5,A,3,0,"div",12),d.Rb()),2&e){var i=d.gc(2);d.zb(4),d.nc("ngForOf",i.UploadedFiles.files),d.zb(1),d.nc("ngIf",i.UploadedFiles.files.length>0)}}function z(e,t){if(1&e&&(d.Sb(0,"div"),d.Gc(1,O,2,1,"div",7),d.Gc(2,x,6,2,"div",7),d.Rb()),2&e){var i=d.gc();d.zb(1),d.nc("ngIf",1===i.Steps),d.zb(1),d.nc("ngIf",2===i.Steps)}}var k=function(){var e=function(){function e(t,i,o,s,n,r,c,a,d,l){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=o,this.coreActions=s,this.actions=n,this.route=r,this.formService=c,this.categoryDataService=a,this.router=d,this.config=l,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Upload Videos",this.submitText="Submit",this.IsLoaded=!1,this.Categories=[],this.UploadedFiles=[],this.Steps=1,this.URL="",this.Auth={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.URL=this.config.getConfig("host"),this.isloaded$.subscribe((function(t){e.IsLoaded=t,e.IsLoaded||e.router.navigate(["/videos/"])})),this.auth$.subscribe((function(t){e.Auth=t})),this.route.params.subscribe((function(t){e.RecordID=Number.parseInt(t.id),isNaN(e.RecordID)&&(e.RecordID=0),e.RecordID>0||(e.Info=e.settingService.getInitObject(),e.initializeControls(e.Info))})),this.categories$.subscribe((function(t){t.length>0?(e.Categories=t,e.updateCategories()):(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(0))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t,e.updateCategories()),e.showLoader=!1}))}},{key:"LoadInfo",value:function(){}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"initializeControls",value:function(e){this.controls=this.formService.getControls(e,this.Auth),this.updateCategories()}},{key:"makeid",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},{key:"gDur",value:function(e){var t=Math.floor(e/3600),i="";e-=3600*t,t<10&&(i="0"+t);var o=Math.floor(e/60),s="";e-=60*o,o<10&&(s="0"+o);var n=Math.floor(e/1);return e-=1*n,i+":"+s+":"+(n<10?"0"+n:n.toString())}},{key:"attachthumbnails",value:function(e){console.log(e),this.TriggleModal(e)}},{key:"TriggleModal",value:function(e){}},{key:"delete",value:function(e,t,i){t>-1&&e.video_thumbs.splice(t,1),i.stopPropagation()}},{key:"capture",value:function(e){console.log(e);var t=this.makeid(),i=document.getElementById("vd_"+e.id),o=(this.gDur(i.duration),document.createElement("canvas"));o.id=t,o.width=800,o.height=600,o.style.zIndex=8,o.style.border="1px solid",o.getContext("2d").drawImage(i,0,0,800,600),document.getElementById("view_"+e.id).appendChild(o);var s="temp_"+t,n=document.createElement("canvas");n.id=s,n.width=180,n.height=120,n.style.zIndex=8,n.style.border="1px solid",n.getContext("2d").drawImage(i,0,0,180,120);var r=!1;0===e.video_thumbs.length&&(r=!0),e.video_thumbs.push({id:t,temp:n.toDataURL(),filename:o.toDataURL(),selected:r})}},{key:"SubmitForm",value:function(e){if(e.files.length>0){var t=!0,i=!1,o=void 0;try{for(var s,n=e.files[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.id=this.makeid(),r.videofilename=r.filename,r.title="",r.thumb_url="",r.description="",r.duration="",r.duration_sec=0,r.userid=this.Auth.User.id,r.video_thumbs=[],r.categories=this.coreService.returnSelectedCategoryArray(e.categories),r.tags=e.tags}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.UploadedFiles=e,this.Steps=2}}},{key:"captureDuration",value:function(e){var t=document.getElementById("vd_"+e.id);e.duration_sec=t.duration,e.duration=this.gDur(t.duration)}},{key:"saveChanges",value:function(){var e=this;this.showLoader=!0;var t=!0,i=!1,o=void 0;try{for(var s,n=this.UploadedFiles.files[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value;r.duration_sec=parseInt(r.duration_sec,10),r.id=0}}catch(c){i=!0,o=c}finally{try{t||null==n.return||n.return()}finally{if(i)throw o}}this.dataService.DirectVideo(this.UploadedFiles.files).subscribe((function(t){"error"===t.status?e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(e.coreActions.Notify({title:"Record Processed Successfully",text:"",css:"bg-success"}),e.actions.reloadList(),e.router.navigate([e.route_path])),e.showLoader=!1}),(function(t){e.showLoader=!1,e.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}},{key:"remove",value:function(e,t){e>-1&&this.UploadedFiles.files.splice(e,1),t.stopPropagation=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(b.a),d.Mb(h.a),d.Mb(f.a),d.Mb(p.a),d.Mb(v.a),d.Mb(n.a),d.Mb(p.c),d.Mb(g.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-direct-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([n.a,r.a,c.a])],decls:11,vars:3,consts:[[1,"row"],[1,"col-lg-12"],[1,"col-md-9"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"],[1,"table"],[4,"ngFor","ngForOf"],["class","m-b-10 m-t-10",4,"ngIf"],[2,"width","70%"],[1,"m-b-10"],["controls","",2,"width","100%","height","auto","height","auto",3,"id"],["type","video/mp4",3,"src"],["title","Capture duration from video",1,"btn","btn-danger","m-r-5",3,"click"],[1,"form-group"],["type","text","placeholder","Enter Thumb Url",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],["type","text","readonly","true","placeholder","Enter duration",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-text","text-center"],[3,"click"],["aria-hidden","true",1,"fa","fa-close","text-danger"],[2,"width","30%"],[2,"display","none",3,"id"],[1,"card-img-top","img-responsive"],[1,"card-img-top",2,"cursor","pointer",3,"src","alt"],[1,"center-text"],["href","#","data-toggle","tooltip","data-original-title","Close",3,"click"],[1,"fa","fa-close","text-danger"],[1,"m-b-10","m-t-10"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",0),d.Sb(3,"div",2),d.Sb(4,"div",3),d.Sb(5,"div",4),d.Sb(6,"h4",5),d.Ic(7),d.Rb(),d.Rb(),d.Sb(8,"div",6),d.Gc(9,I,1,0,"app-loader",7),d.Gc(10,z,3,2,"div",7),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&e&&(d.zb(7),d.Jc(t.formHeading),d.zb(2),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader))},directives:[m.o,S.a,y.a,m.n,R.c,R.n,R.q],encapsulation:2,data:{animation:[a.a]}}),Object(o.a)([Object(s.e)(["videos","categories"])],e.prototype,"categories$",void 0),Object(o.a)([Object(s.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(o.a)([Object(s.e)(["videos","isloaded"])],e.prototype,"isloaded$",void 0),Object(o.a)([Object(s.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()}}]);