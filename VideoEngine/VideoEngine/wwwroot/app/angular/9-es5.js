(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{OPJD:function(e,t,o){"use strict";var i=o("fXoL"),r=function(){function e(e,t,o){this.googleChartsVersion=t,this.mapsApiKey=o,this.googleScriptLoadingNotifier=new i.n,this.googleScriptIsLoading=!1,this.localeId=e,null===this.googleChartsVersion&&(this.googleChartsVersion="46")}return e.prototype.load=function(e){var t=this;return new Promise((function(o,i){void 0===o&&(o=Function.prototype),void 0===i&&(i=Function.prototype),t.loadGoogleChartsScript().then((function(){var i={language:t.localeId,callback:o,packages:e};t.mapsApiKey&&(i.mapsApiKey=t.mapsApiKey),google.charts.load(t.googleChartsVersion,i)})).catch((function(e){return i()}))}))},e.prototype.loadGoogleChartsScript=function(){var e=this;return new Promise((function(t,o){if(void 0===t&&(t=Function.prototype),void 0===o&&(o=Function.prototype),"undefined"!=typeof google&&google.charts)t();else if(e.googleScriptIsLoading)e.googleScriptLoadingNotifier.subscribe((function(e){e?t():o()}));else{e.googleScriptIsLoading=!0;var i=document.createElement("script");i.type="text/javascript",i.src="https://www.gstatic.com/charts/loader.js",i.async=!0,i.defer=!0,i.onload=function(){e.googleScriptIsLoading=!1,e.googleScriptLoadingNotifier.emit(!0),t()},i.onerror=function(){e.googleScriptIsLoading=!1,e.googleScriptLoadingNotifier.emit(!1),o()},document.getElementsByTagName("head")[0].appendChild(i)}}))},e.\u0275fac=function(t){return new(t||e)(i.ac(i.u),i.ac("googleChartsVersion",8),i.ac("mapsApiKey",8))},e.\u0275prov=i.Ib({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),n=function(){function e(e){this.tooltipDOMElement=e}return e.prototype.setPosition=function(t,o){this.tooltipDOMElement.nativeElement.style.left=t+e.PIXELS,this.tooltipDOMElement.nativeElement.style.top=o+e.PIXELS},e.prototype.getDOMElement=function(){return this.tooltipDOMElement},e.PIXELS="px",e}(),a=function(){function e(e,t){var o=this;this.mouseOverListener=function(e){var t=o.parseMouseEvent(e);return t.tooltip=o.getHTMLTooltip(),t},this.mouseOutListener=function(e){return o.parseMouseEvent(e)},this.selectListener=function(){var e={message:"select",row:null,column:null,selectedRowValues:[],selectedRowFormattedValues:[],columnLabel:""},t=o.wrapper.visualization.getSelection(),i=t[t.length-1];if(!i)return e.message="deselect",e;var r=i;if(null!=i.row){e.row=r.row;for(var n=[],a=[],s=o.wrapper.getDataTable(),l=s.getNumberOfColumns(),u=0;u<l;u++)n.push(s.getValue(r.row,u)),a.push(s.getFormattedValue(r.row,u));e.selectedRowValues=n,e.selectedRowFormattedValues=a}return null!=r.column&&(e.column=r.column,e.columnLabel=o.getColumnLabelAtPosition(r)),i.name&&(e.columnLabel=i.name),e},this.el=e,this.loaderService=t,this.chartSelect=new i.n,this.chartSelectOneTime=new i.n,this.chartReady=new i.n,this.chartReadyOneTime=new i.n,this.chartError=new i.n,this.chartErrorOneTime=new i.n,this.mouseOver=new i.n,this.mouseOverOneTime=new i.n,this.mouseOut=new i.n,this.mouseOutOneTime=new i.n,this.regionClick=new i.n,this.regionClickOneTime=new i.n}return e.prototype.ngOnChanges=function(e){var t=this;if(e.data){if(!this.data)return;this.options=this.data.options,this.options||(this.options={}),this.data.component=this,this.loaderService.load().then((function(){void 0!==t.wrapper&&t.wrapper.getChartType()===t.data.chartType||(t.convertOptions(),t.data.firstRowIsData&&Array.isArray(t.data.dataTable)&&(t.data.dataTable=google.visualization.arrayToDataTable(t.data.dataTable,!0)),t.wrapper=new google.visualization.ChartWrapper(t.data),t.registerChartWrapperEvents()),t.draw()}))}},e.prototype.draw=function(){var e=this;if(this.data.dataTable)this.wrapper.setDataTable(this.data.dataTable),this._draw();else if(this.data.dataSourceUrl){var t=new google.visualization.Query(this.data.dataSourceUrl);this.data.refreshInterval&&t.setRefreshInterval(this.data.refreshInterval),this.data.query&&t.setQuery(this.data.query),t.send((function(t){if(!t.isError()){var o=t.getDataTable();e.wrapper.setDataTable(o),e.data.dataTable=o,e._draw()}}))}},e.prototype._draw=function(){this.convertOptions(),this.wrapper.setOptions(this.options),this.reformat(),this.wrapper.draw(this.el.nativeElement.querySelector("div"))},e.prototype.reformat=function(){if(this.data&&void 0!==this.data.formatters)for(var e=this.wrapper.getDataTable(),t=0,o=this.data.formatters;t<o.length;t++){var i=o[t],r=void 0;if("PatternFormat"!==i.type){var n=google.visualization[i.type],a=i.options;if(r=new n(a),"ColorFormat"===i.type&&a)for(var s=0,l=(h=a).ranges;s<l.length;s++){var u=l[s];void 0!==u.fromBgColor&&void 0!==u.toBgColor?r.addGradientRange(u.from,u.to,u.color,u.fromBgColor,u.toBgColor):r.addRange(u.from,u.to,u.color,u.bgcolor)}for(var c=0,p=i.columns;c<p.length;c++)r.format(e,p[c])}else{var h=i.options;(r=new google.visualization.PatternFormat(h.pattern)).format(e,i.columns,h.dstColumnIndex)}}},e.prototype.getSelectorBySeriesType=function(e){return{bars:"bar#%s#%r",haxis:"hAxis#0#label",line:"point#%s#%r",legend:"legendentry#%s",area:"point#%s#%r"}[e]},e.prototype.getSeriesByColumn=function(e){for(var t=0,o=this.wrapper.getDataTable(),i=e-1;i>=0;i--){var r=o.getColumnRole(i),n=o.getColumnType(i);"data"!==r&&"number"!==n||t++}return t},e.prototype.getBoundingBoxForItem=function(e){var t={top:0,left:0,width:0,height:0};if(this.cli){var o=e.column,i=this.getSeriesByColumn(o),r=e.row,n=this.options.seriesType;if(this.options.series&&this.options.series[i]&&this.options.series[i].type&&(n=this.options.series[i].type),n){var a=this.getSelectorBySeriesType(n);if(a){a=a.replace("%s",i+"").replace("%c",o+"").replace("%r",r+"");var s=this.cli.getBoundingBox(a);s&&(t=s)}}}return t},e.prototype.getValueAtPosition=function(e){return null==e.row?null:this.wrapper.getDataTable().getValue(e.row,e.column)},e.prototype.getColumnTypeAtPosition=function(e){return this.wrapper.getDataTable().getColumnType(e.column)||""},e.prototype.getColumnLabelAtPosition=function(e){return this.wrapper.getDataTable().getColumnLabel(e.column)||""},e.prototype.getHTMLTooltip=function(){var e=new i.l(this.el.nativeElement.querySelector(".google-visualization-tooltip"));return new n(e)},e.prototype.parseMouseEvent=function(e){var t=this.wrapper.getChartType(),o=e.column;if(null==o)switch(t){case"Timeline":o=3===this.wrapper.getDataTable().getNumberOfColumns()?0:1;break;default:o=0}var i={row:e.row,column:o};return{position:e,boundingBox:this.getBoundingBoxForItem(i),value:this.getValueAtPosition(i),columnType:this.getColumnTypeAtPosition(i),columnLabel:this.getColumnLabelAtPosition(i)}},e.prototype.unregisterEvents=function(){google.visualization.events.removeAllListeners(this.wrapper.getChart()),google.visualization.events.removeAllListeners(this.wrapper)},e.prototype.registerChartEvents=function(){var e=this,t=this.wrapper.getChart();this.cli=t.getChartLayoutInterface?t.getChartLayoutInterface():null,this.mouseOver.observers.length>0&&google.visualization.events.addListener(t,"onmouseover",(function(t){var o=e.parseMouseEvent(t);o.tooltip=e.getHTMLTooltip(),e.mouseOver.emit(o)})),this.mouseOverOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"onmouseover",(function(t){var o=e.parseMouseEvent(t);o.tooltip=e.getHTMLTooltip(),e.mouseOverOneTime.emit(o)})),this.mouseOut.observers.length>0&&google.visualization.events.addListener(t,"onmouseout",(function(t){var o=e.parseMouseEvent(t);e.mouseOut.emit(o)})),this.mouseOutOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"onmouseout",(function(t){var o=e.parseMouseEvent(t);e.mouseOutOneTime.emit(o)})),"GeoChart"===this.data.chartType&&(this.regionClick.observers.length>0&&google.visualization.events.addListener(t,"regionClick",(function(t){e.regionClick.emit(t)})),this.regionClickOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(t,"regionClick",(function(t){e.regionClick.emit(t)})))},e.prototype.registerChartWrapperEvents=function(){var e=this;google.visualization.events.addListener(this.wrapper,"ready",(function(){e.chartReady.emit({message:"Chart ready"})})),google.visualization.events.addOneTimeListener(this.wrapper,"ready",(function(){e.chartReadyOneTime.emit({message:"Chart ready (one time)"}),e.registerChartEvents()})),google.visualization.events.addListener(this.wrapper,"error",(function(t){e.chartError.emit(t)})),google.visualization.events.addOneTimeListener(this.wrapper,"error",(function(t){e.chartErrorOneTime.emit(t)})),this.addListener(this.wrapper,"select",this.selectListener,this.chartSelect),this.addOneTimeListener(this.wrapper,"select",this.selectListener,this.chartSelectOneTime)},e.prototype.addListener=function(e,t,o,i){google.visualization.events.addListener(e,t,(function(){i.emit(o())}))},e.prototype.addOneTimeListener=function(e,t,o,i){google.visualization.events.addOneTimeListener(e,t,(function(){i.emit(o())}))},e.prototype.convertOptions=function(){try{this.options=google.charts[this.data.chartType].convertOptions(this.options)}catch(e){return}},e.\u0275fac=function(t){return new(t||e)(i.Mb(i.l),i.Mb(r))},e.\u0275cmp=i.Gb({type:e,selectors:[["google-chart"]],inputs:{data:"data"},outputs:{chartSelect:"chartSelect",chartSelectOneTime:"chartSelectOneTime",chartReady:"chartReady",chartReadyOneTime:"chartReadyOneTime",chartError:"chartError",chartErrorOneTime:"chartErrorOneTime",mouseOver:"mouseOver",mouseOverOneTime:"mouseOverOneTime",mouseOut:"mouseOut",mouseOutOneTime:"mouseOutOneTime",regionClick:"regionClick",regionClickOneTime:"regionClickOneTime"},features:[i.xb],decls:1,vars:0,template:function(e,t){1&e&&i.Nb(0,"div")},encapsulation:2,changeDetection:0}),e}(),s=function(){function e(){}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[r]}),e}();o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return s}))}}]);