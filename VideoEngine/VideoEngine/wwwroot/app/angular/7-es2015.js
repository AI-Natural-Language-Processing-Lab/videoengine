(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+CAv":function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var s=i("mrSG"),o=i("Usal"),c=i("pdjO"),n=i("fXoL"),r=i("VHDF"),a=i("si/t"),d=i("nD3/"),l=i("LEd3"),b=i("+P6t"),h=i("tyNb"),u=i("Hjmt"),p=i("ow1T"),g=i("ofXK"),f=i("RDfn"),m=i("+kG/");function v(t,e){1&t&&(n.Sb(0,"div"),n.Sb(1,"h2",1),n.Ic(2,"Access Denied"),n.Rb(),n.Rb())}function S(t,e){1&t&&n.Nb(0,"app-loader")}function y(t,e){if(1&t){const t=n.Tb();n.Sb(0,"dynamic-modal-form",9),n.ec("OnSubmit",(function(e){return n.yc(t),n.gc(2).SubmitForm(e)})),n.Rb()}if(2&t){const t=n.gc(2);n.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",!1)("showModal",!1)("submitText",t.submitText)}}function R(t,e){if(1&t&&(n.Sb(0,"div"),n.Sb(1,"div",2),n.Sb(2,"div",3),n.Sb(3,"div",4),n.Sb(4,"div",5),n.Sb(5,"h4",6),n.Ic(6),n.Rb(),n.Rb(),n.Sb(7,"div",7),n.Gc(8,S,1,0,"app-loader",0),n.Gc(9,y,1,5,"dynamic-modal-form",8),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t){const t=n.gc();n.zb(6),n.Jc(t.formHeading),n.zb(2),n.nc("ngIf",t.showLoader),n.zb(1),n.nc("ngIf",!t.showLoader)}}let I=(()=>{class t{constructor(t,e,i,s,o,c,n,r,a){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.route=c,this.permission=n,this.formService=r,this.router=a,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Edit Video Information",this.submitText="Save Changes",this.IsLoaded=!1,this.Categories=[],this.Auth={},this.isAccessGranted=!1,this.isActionGranded=!1,this.Settings={}}ngOnInit(){this.settings$.subscribe(t=>{this.Settings=t}),this.auth$.subscribe(t=>{if(this.Auth=t,this.isAdmin){const e="1521395965196";this.permission.GrandResourceAccess(!1,e,"1521396022188",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}else this.isAccessGranted=!0,this.isActionGranded=!0}),this.route.params.subscribe(t=>{this.RecordID=this.coreService.decrypt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0?this.Initialize():this.Redirect()}),this.categories$.subscribe(t=>{this.Categories=t,this.updateCategories()}),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded||this.Redirect()})}Initialize(){this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe(t=>{t.isaccess?this.LoadInfo():this.Redirect()},t=>{this.Redirect()}):this.Redirect()}Redirect(){this.router.navigate([this.route_path])}LoadInfo(){this.showLoader=!0,this.dataService.GetVideoInfo(this.RecordID).subscribe(t=>{"success"===t.status?this.initializeControls(t.post):(this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),this.initializeControls(this.settingService.getInitObject())),this.showLoader=!1})}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}initializeControls(t){this.controls=this.formService.editVideoControls(t,this.Settings,this.isAdmin),this.updateCategories()}SubmitForm(t){if(!this.isActionGranded)return void this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"});this.showLoader=!0;let e="Added";this.RecordID>0&&(t.id=this.RecordID,e="Updated"),t.userid=this.Auth.User.id,t.categories=this.coreService.returnSelectedCategoryArray(t.categories),t.isadmin=this.isAdmin,this.dataService.ProcessRecord(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.coreActions.Notify({title:"Record "+e+" Successfully",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate(this.isAdmin?[this.route_path+"profile/"+this.coreService.encrypt(t.record.id)]:[this.route_path])),this.showLoader=!1},t=>{this.showLoader=!1,this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(r.a),n.Mb(a.a),n.Mb(d.a),n.Mb(l.a),n.Mb(b.a),n.Mb(h.a),n.Mb(u.a),n.Mb(p.a),n.Mb(h.c))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-video-proc"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(n.Gc(0,v,3,0,"div",0),n.Gc(1,R,10,3,"div",0)),2&t&&(n.nc("ngIf",!e.isAccessGranted),n.zb(1),n.nc("ngIf",e.isAccessGranted))},directives:[g.o,f.a,m.a],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["videos","settings"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},"+K8V":function(t,e,i){"use strict";i.d(e,"a",(function(){return j}));var s=i("mrSG"),o=i("Usal"),c=i("pdjO"),n=i("zIGt"),r=i("YaUu"),a=i("t+rW"),d=i("fXoL"),l=i("si/t"),b=i("nD3/"),h=i("LEd3"),u=i("+P6t"),p=i("tyNb"),g=i("ow1T"),f=i("ofXK"),m=i("9BpC"),v=i("3Pt+"),S=i("RDfn"),y=i("+kG/");const R=function(){return[]};function I(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"app-uploader",9),d.ec("OnUploaded",(function(e){return d.yc(t),d.gc(2).OnUploadedVideos(e)})),d.Rb(),d.Rb()}if(2&t){const t=d.gc(2);d.zb(1),d.nc("extensions",t.extensions)("max_concurrent_uploads",t.max_concurrent_uploads)("filesize",t.filesize)("Info",t.Auth.User)("uploadedFiles",d.rc(5,R))}}function w(t,e){if(1&t&&(d.Sb(0,"div",1),d.Sb(1,"h4",13),d.Ic(2),d.Rb(),d.Sb(3,"p",14),d.Ic(4),d.Rb(),d.Sb(5,"div",15),d.Nb(6,"div",16),d.Rb(),d.Rb()),2&t){const t=d.gc().$implicit;d.zb(2),d.Jc(t.pf),d.zb(2),d.Jc(t.edesc),d.zb(2),d.nc("ngClass","completed"===t.isenabled?"progress-bar bg-success":"progress-bar bg-danger")("ngStyle",t.progressStyle)}}function O(t,e){1&t&&(d.Sb(0,"div",1),d.Sb(1,"p"),d.Ic(2,"processing video data..."),d.Rb(),d.Rb())}function A(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",27),d.Sb(1,"a",28),d.ec("click",(function(i){d.yc(t);const s=e.$implicit,o=d.gc(3).$implicit;return d.gc(3).updateSelectedThumb(s,o,i),!1})),d.Nb(2,"img",29),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,i=d.gc(3).$implicit;d.zb(2),d.qc("src","",i.img_url,"",t.filename,"",d.Bc),d.nc("ngClass",t.selected?"selected":"")}}function _(t,e){if(1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",25),d.Gc(3,A,3,3,"div",26),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.gc(2).$implicit;d.zb(3),d.nc("ngForOf",t.video_thumbs)}}function C(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",1),d.Sb(1,"div",17),d.Sb(2,"div",18),d.Nb(3,"img",19),d.Rb(),d.Sb(4,"div",20),d.Sb(5,"div",21),d.Sb(6,"input",22),d.ec("ngModelChange",(function(e){return d.yc(t),d.gc().$implicit.title=e})),d.Rb(),d.Rb(),d.Sb(7,"div",21),d.Sb(8,"textarea",23),d.ec("ngModelChange",(function(e){return d.yc(t),d.gc().$implicit.description=e})),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Gc(9,_,4,1,"div",24),d.Rb()}if(2&t){const t=d.gc().$implicit;d.zb(3),d.qc("src","",t.img_url,"",t.defaultImg,"",d.Bc),d.zb(3),d.nc("ngModel",t.title),d.zb(2),d.nc("ngModel",t.description),d.zb(1),d.nc("ngIf",t.video_thumbs.length>0)}}function z(t,e){if(1&t&&(d.Sb(0,"div",11),d.Gc(1,w,7,4,"div",12),d.Gc(2,O,3,0,"div",12),d.Gc(3,C,10,5,"div",12),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.nc("ngIf",0===t.panelstatus),d.zb(1),d.nc("ngIf",1===t.panelstatus),d.zb(1),d.nc("ngIf",2===t.panelstatus)}}function x(t,e){if(1&t&&(d.Sb(0,"div"),d.Gc(1,z,4,3,"div",10),d.hc(2,"async"),d.Rb()),2&t){const t=d.gc(2);d.zb(1),d.nc("ngForOf",d.ic(2,1,t.uploadedfiles$))}}function M(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",30),d.Sb(1,"button",31),d.ec("click",(function(){return d.yc(t),d.gc(2).nextPanel()})),d.Ic(2,"Next"),d.Rb(),d.Rb()}}function F(t,e){if(1&t&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4",5),d.Ic(3),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,I,2,6,"div",7),d.hc(6,"async"),d.Gc(7,x,3,3,"div",7),d.hc(8,"async"),d.Rb(),d.Gc(9,M,3,0,"div",8),d.Rb()),2&t){const t=d.gc();d.zb(3),d.Jc(t.formHeading),d.zb(2),d.nc("ngIf",0==d.ic(6,4,t.uploadedfiles$).length),d.zb(2),d.nc("ngIf",d.ic(8,6,t.uploadedfiles$).length>0),d.zb(2),d.nc("ngIf",t.showSubmitBtn)}}function L(t,e){1&t&&d.Nb(0,"app-loader")}function G(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",33),d.ec("OnSubmit",(function(e){return d.yc(t),d.gc(2).SubmitForm(e)})),d.Rb()}if(2&t){const t=d.gc(2);d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",t.showCancel)("cancelText",t.cancelText)("showModal",!1)("submitText",t.submitText)}}function $(t,e){if(1&t&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4"),d.Ic(3,"Update Information"),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,L,1,0,"app-loader",7),d.Gc(6,G,1,6,"dynamic-modal-form",32),d.Rb(),d.Rb()),2&t){const t=d.gc();d.zb(5),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader)}}let j=(()=>{class t{constructor(t,e,i,s,o,c,n){this.dataService=t,this.coreService=e,this.coreActions=i,this.actions=s,this.router=o,this.categoryDataService=c,this.formService=n,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Upload Videos",this.Auth={},this.UploadedFiles=[],this.showSubmitBtn=!1,this.selectedFile={},this.EncodingIndex=0,this.showLoader=!1,this.Panel=0,this.VideoInfo={tags:"",category:""},this.Categories=[],this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.controls=[],this.submitText="Save Changes",this.showCancel=!1,this.cancelText="Back",this.Settings={}}ngOnInit(){this.auth$.subscribe(t=>{this.Auth=t}),this.categories$.subscribe(t=>{t.length>0?(this.Categories=t,this.updateCategories()):(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(0))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t,this.updateCategories()),this.showLoader=!1}),this.settings$.subscribe(t=>{this.Settings=t,void 0!==this.Settings.videos.general&&(this.extensions=this.Settings.videos.general.extensions,this.filesize=this.Settings.videos.general.max_size,this.max_concurrent_uploads=this.Settings.videos.general.max_concurrent_uploads)}),this.uploadedfiles$.subscribe(t=>{this.UploadedFiles=t})}OnUploadedVideos(t){for(const e of t)e.id=this.coreService.makeid(),e.sf=e.filename,e.pf=e.fileIndex+"-"+this.coreService.makeid()+"_pub.mp4",e.isenabled="start",e.errorcode=0,e.progress=0,e.progressStyle={width:"0%"},e.title="",e.description="",e.categories="",e.categories="",e.privacy=0,e.userid=this.Auth.User.id,e.albumid=0,e.video_thumbs=[],e.processID=0,e.panelstatus=0,e.defaultImg="";this.actions.uploadedVideoFiles(t),this.publish()}publish(){this.uploadedfiles$.subscribe(t=>{t.length>0&&(this.EncodingIndex<t.length?(this.selectedFile=t[this.EncodingIndex],this.encodeVideo()):this.finalOutput())})}encodeVideo(){this.selectedFile.isenabled="progress",this.dataService.EncodeVideo({sf:this.selectedFile.sf,pf:this.selectedFile.pf,tp:0,userid:this.Auth.User.id}).subscribe(t=>{parseInt(t.ecode,10)>0?(this.selectedFile.errorcode=parseInt(t.ecode,10),this.selectedFile.edesc=t.edesc,this.EncodingIndex++,this.publish()):(this.selectedFile.processID=t.procid,this.selectedFile.IntervalID=setInterval(()=>{this.getProgress()},1e3)),this.actions.updateVideoFile(this.selectedFile)},t=>{this.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})})}getProgress(){this.dataService.EncodeVideo({pid:this.selectedFile.processID,tp:1,userid:this.Auth.User.id}).subscribe(t=>{this.selectedFile.progress=parseInt(t.status,10),this.selectedFile.progressStyle={width:this.selectedFile.progress+"%"},parseInt(t.status,10)>=100&&(this.selectedFile.isenabled="completed",0!==this.selectedFile.IntervalID&&clearInterval(this.selectedFile.IntervalID),this.actions.updateVideoFile(this.selectedFile),this.getInfo())},t=>{this.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})})}getInfo(){this.selectedFile.panelstatus=1,this.dataService.EncodeVideo({pid:this.selectedFile.processID,sf:this.selectedFile.sf,pf:this.selectedFile.pf,tp:2,userid:this.Auth.User.id}).subscribe(t=>{if("OK"===t.status){if(this.selectedFile.panelstatus=2,this.selectedFile.errorcode=t.ecode,this.selectedFile.pf=t.fname,this.selectedFile.duration=t.dur,this.selectedFile.dursec=t.dursec,this.selectedFile.tfile=t.tfile,this.selectedFile.edesc=t.edesc,this.selectedFile.isenable=t.isenable,this.selectedFile.fIndex=t.fIndex,this.selectedFile.img_url=t.img_url,void 0!==t.fIndex)for(let e=1;e<=14;e++){let i="",s="";e<=9?(s="00"+e,i=t.fIndex+"00"+e+".jpg"):(s="0"+e,i=t.fIndex+"0"+e+".jpg");let o=!1;8===e?(this.selectedFile.defaultImg=i,o=!0):o=!1,this.selectedFile.video_thumbs.push({id:e,filename:i,fileIndex:"img_"+s,selected:o})}this.actions.updateVideoFile(this.selectedFile)}this.EncodingIndex++,this.publish()},t=>{this.coreActions.Notify({title:"Error occured while encoding video",text:"",css:"bg-danger"})})}finalOutput(){console.log("final output triggered"),this.showSubmitBtn=!0}updateSelectedThumb(t,e,i){if(e.defaultImg=t.filename,this.selectedFile.defaultImg=t.filename,this.selectedFile.video_thumbs.length>0)for(const s of this.selectedFile.video_thumbs)s.selected=s.id===t.id;this.actions.updateVideoFile(this.selectedFile),i.stopPropagation()}nextPanel(){this.Panel=1,this.initializeControls({tags:"",category_list:[]})}initializeControls(t){this.controls=this.formService.uploaderOptionControls(t),this.updateCategories()}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}SubmitForm(t){if(this.UploadedFiles.length>0){for(const e of this.UploadedFiles)e.tags=t.tags,e.categories=this.coreService.returnSelectedCategoryArray(t.categories),e.userid=this.Auth.User.id,e.id=0,e.isenabled=0;this.processVideos(this.UploadedFiles)}}processVideos(t){this.showLoader=!0,this.dataService.AddFFMPEGVideos(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.actions.resetPublishing(),this.coreActions.Notify({title:"All uploaded videos processed successfully",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.actions.loadEnd(),this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l.a),d.Mb(b.a),d.Mb(h.a),d.Mb(u.a),d.Mb(p.c),d.Mb(n.a),d.Mb(g.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-ffmpeg-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([n.a,r.a,a.a])],decls:7,vars:4,consts:[[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card-footer",4,"ngIf"],[3,"extensions","max_concurrent_uploads","filesize","Info","uploadedFiles","OnUploaded"],["class","row m-b-20",4,"ngFor","ngForOf"],[1,"row","m-b-20"],["class","col-md-12",4,"ngIf"],[1,"m-b-5"],["ng-if","file.errorcode > 0",1,"m-b-5"],[1,"progress","m-b-10"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"],[1,"row","m-b-10"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"form-group"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"scrolling-wrapper"],["class","scroll-card m-r-5",4,"ngFor","ngForOf"],[1,"scroll-card","m-r-5"],["href","#",3,"click"],[2,"width","200px","height","auto",3,"ngClass","src"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"h1"),d.Ic(3,"FFMPEG Uploader"),d.Rb(),d.Gc(4,F,10,8,"div",2),d.Gc(5,$,7,2,"div",2),d.hc(6,"async"),d.Rb(),d.Rb()),2&t&&(d.zb(4),d.nc("ngIf",0===e.Panel),d.zb(1),d.nc("ngIf",1===e.Panel&&!d.ic(6,2,e.loading$)))},directives:[f.o,m.a,f.n,f.m,f.p,v.c,v.n,v.q,S.a,y.a],pipes:[f.b],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],t.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["videos","loading"])],t.prototype,"loading$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["videos","uploadedfiles"])],t.prototype,"uploadedfiles$",void 0),Object(s.a)([Object(o.e)(["configuration","configs"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},"6Fzr":function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var s=i("mrSG"),o=i("Usal"),c=i("pdjO"),n=i("fXoL"),r=i("VHDF"),a=i("si/t"),d=i("nD3/"),l=i("LEd3"),b=i("+P6t"),h=i("tyNb"),u=i("Hjmt"),p=i("ow1T"),g=i("ofXK"),f=i("RDfn");function m(t,e){1&t&&(n.Sb(0,"div"),n.Sb(1,"h2",1),n.Ic(2,"Access Denied"),n.Rb(),n.Rb())}function v(t,e){1&t&&n.Nb(0,"app-loader")}function S(t,e){if(1&t){const t=n.Tb();n.Sb(0,"div",12),n.Sb(1,"a",13),n.ec("click",(function(i){n.yc(t);const s=e.$implicit;return n.gc(3).updateSelectedThumb(s,i),!1})),n.Nb(2,"img",14),n.Rb(),n.Rb()}if(2&t){const t=e.$implicit;n.zb(2),n.oc("src",t.filename,n.Bc),n.nc("ngClass",t.selected?"selected":"")}}function y(t,e){if(1&t){const t=n.Tb();n.Sb(0,"div",5),n.Sb(1,"div",6),n.Sb(2,"h4",7),n.Ic(3),n.Rb(),n.Rb(),n.Sb(4,"div",8),n.Sb(5,"div",2),n.Gc(6,S,3,2,"div",9),n.Rb(),n.Rb(),n.Sb(7,"div",10),n.Sb(8,"button",11),n.ec("click",(function(){return n.yc(t),n.gc(2).updateThumb()})),n.Ic(9," Save Changes "),n.Rb(),n.Rb(),n.Rb()}if(2&t){const t=n.gc(2);n.zb(3),n.Jc(t.formHeading),n.zb(3),n.nc("ngForOf",t.Info.video_thumbs)}}function R(t,e){if(1&t&&(n.Sb(0,"div"),n.Sb(1,"div",2),n.Sb(2,"div",3),n.Gc(3,v,1,0,"app-loader",0),n.Gc(4,y,10,2,"div",4),n.Rb(),n.Rb(),n.Rb()),2&t){const t=n.gc();n.zb(3),n.nc("ngIf",t.showLoader),n.zb(1),n.nc("ngIf",!t.showLoader)}}let I=(()=>{class t{constructor(t,e,i,s,o,c,n,r,a){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.route=c,this.permission=n,this.formService=r,this.router=a,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.showLoader=!1,this.formHeading="Update Video Cover",this.Info={video_thumbs:[]},this.IsLoaded=!1,this.Auth={},this.isAccessGranted=!1,this.isActionGranded=!1,this.Settings={}}ngOnInit(){this.settings$.subscribe(t=>{this.Settings=t}),this.auth$.subscribe(t=>{if(this.Auth=t,this.isAdmin){const e="1521395965196";this.permission.GrandResourceAccess(!1,e,"1521396022188",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}else this.isAccessGranted=!0,this.isActionGranded=!0}),this.route.params.subscribe(t=>{this.RecordID=this.coreService.decrypt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0?this.Initialize():this.Redirect()}),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded||this.Redirect()})}Initialize(){this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe(t=>{t.isaccess?this.LoadInfo():this.Redirect()},t=>{this.Redirect()}):this.Redirect()}Redirect(){this.router.navigate([this.route_path])}LoadInfo(){this.showLoader=!0,this.dataService.GetVideoInfo(this.RecordID).subscribe(t=>{"success"===t.status?this.initializeControls(t.post):(this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),this.initializeControls(this.settingService.getInitObject())),this.showLoader=!1})}initializeControls(t){if(this.Info=t,0===this.Info.isexternal){this.Info.video_thumbs=[];for(let t=1;t<=10;t++){let e="";e=t<=9?this.Info.picturename+"_00"+t+".jpg":this.Info.picturename+"_0"+t+".jpg";let i=!1;i=e===this.Info.thumb_url,this.Info.video_thumbs.push({id:t,filename:e,selected:i})}}}updateSelectedThumb(t,e){if(this.Info.video_thumbs.length>0){for(const e of this.Info.video_thumbs)e.selected=e.id===t.id;e.stopPropagation()}}updateThumb(){const t={id:this.Info.id,userid:this.Info.userid};for(const e of this.Info.video_thumbs)e.selected&&(t.picturename=e.filename);this.dataService.UpdateThumbnail(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.coreActions.Notify({title:t.message,text:"",css:"bg-success"}),this.router.navigate([this.route_path]))},t=>{this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(r.a),n.Mb(a.a),n.Mb(d.a),n.Mb(l.a),n.Mb(b.a),n.Mb(h.a),n.Mb(u.a),n.Mb(p.a),n.Mb(h.c))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-video-updatethumb"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],["class","col-md-3 m-b-10",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"col-md-3","m-b-10"],["href","#",3,"click"],[3,"ngClass","src"]],template:function(t,e){1&t&&(n.Gc(0,m,3,0,"div",0),n.Gc(1,R,5,2,"div",0)),2&t&&(n.nc("ngIf",!e.isAccessGranted),n.zb(1),n.nc("ngIf",e.isAccessGranted))},directives:[g.o,f.a,g.n,g.m],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["videos","settings"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},"9BpC":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("fXoL"),o=i("1pjZ"),c=i("ofXK"),n=i("zRvm");function r(t,e){if(1&t){const t=s.Tb();s.Sb(0,"app-plupload",1),s.ec("onCompletion",(function(e){return s.yc(t),s.gc().filesUploaded(e)})),s.Rb()}if(2&t){const t=s.gc();s.nc("options",t.uploadoptions)}}let a=(()=>{class t{constructor(t){this.config=t,this.uploadedFiles=[],this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.Info={},this.OnUploaded=new s.n,this.onRemove=new s.n,this.InitUploader=!1,this.uploadoptions={handlerpath:this.config.getConfig("host")+"api/ffmpeg/upload",pickfilecaption:"Select Videos",pickbuttoncss:"btn btn-lg btn-success text-center",uploadfilecaption:"Start Uploading",maxfilesize:this.filesize,chunksize:"8mb",headers:{},extensiontitle:"Video Files",extensions:this.extensions,filepath:"",username:"",removehandler:"",maxallowedfiles:this.max_concurrent_uploads,showFileName:!1,showoriginalSize:!1,avatormode:!1,value:[]}}ngOnChanges(){this.uploadoptions.username=this.Info.id,void 0!==this.uploadoptions.username&&(this.InitUploader=!0)}filesUploaded(t){console.log("uploaded files"),console.log(t),this.OnUploaded.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(o.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-uploader"]],inputs:{uploadedFiles:"uploadedFiles",extensions:"extensions",filesize:"filesize",max_concurrent_uploads:"max_concurrent_uploads",Info:"Info"},outputs:{OnUploaded:"OnUploaded",onRemove:"onRemove"},features:[s.xb],decls:1,vars:1,consts:[[3,"options","onCompletion",4,"ngIf"],[3,"options","onCompletion"]],template:function(t,e){1&t&&s.Gc(0,r,1,1,"app-plupload",0),2&t&&s.nc("ngIf",e.InitUploader)},directives:[c.o,n.a],encapsulation:2}),t})()},Hk5R:function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var s=i("mrSG"),o=i("Usal"),c=i("pdjO"),n=i("fXoL"),r=i("LEd3"),a=i("tyNb"),d=i("nD3/"),l=i("ofXK");const b=function(t){return[t]};function h(t,e){if(1&t&&(n.Sb(0,"div",11),n.Sb(1,"button",12),n.Ic(2," Upload Videos [AWS] "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"aws"))}}function u(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",14),n.Ic(2," Upload Videos [Direct] "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"directuploader/0"))}}function p(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Youtube Videos "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"youtube"))}}function g(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Videos [FFMPEG] "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"ffmpeg"))}}function f(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Movie "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"movie"))}}function m(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Embed Video / Movie "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"embed"))}}function v(t,e){if(1&t&&(n.Sb(0,"div"),n.Gc(1,h,3,3,"div",9),n.hc(2,"async"),n.Gc(3,u,3,3,"div",10),n.hc(4,"async"),n.Gc(5,p,3,3,"div",10),n.hc(6,"async"),n.Gc(7,g,3,3,"div",10),n.hc(8,"async"),n.Gc(9,f,3,3,"div",10),n.hc(10,"async"),n.Gc(11,m,3,3,"div",10),n.hc(12,"async"),n.Rb()),2&t){const t=n.gc(2);n.zb(1),n.nc("ngIf",n.ic(2,6,t.settings$).videos.aws.enable_admin),n.zb(2),n.nc("ngIf",n.ic(4,8,t.settings$).videos.direct.enable_admin),n.zb(2),n.nc("ngIf",n.ic(6,10,t.settings$).videos.youtube.enable_admin),n.zb(2),n.nc("ngIf",n.ic(8,12,t.settings$).videos.ffmpeg.enable_admin),n.zb(2),n.nc("ngIf",n.ic(10,14,t.settings$).videos.movie.enable_admin),n.zb(2),n.nc("ngIf",n.ic(12,16,t.settings$).videos.movie.enable_embed_admin)}}function S(t,e){if(1&t&&(n.Sb(0,"div",11),n.Sb(1,"button",12),n.Ic(2," Upload Videos "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"aws"))}}function y(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",14),n.Ic(2," Upload Videos "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"directuploader/0"))}}function R(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Youtube Videos "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"youtube"))}}function I(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Videos "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"ffmpeg"))}}function w(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Upload Movie "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"movie"))}}function O(t,e){if(1&t&&(n.Sb(0,"div",13),n.Sb(1,"button",15),n.Ic(2," Embed Video / Movie "),n.Rb(),n.Rb()),2&t){const t=n.gc(3);n.zb(1),n.nc("routerLink",n.sc(1,b,t.route_path+"embed"))}}function A(t,e){if(1&t&&(n.Sb(0,"div"),n.Gc(1,S,3,3,"div",9),n.hc(2,"async"),n.Gc(3,y,3,3,"div",10),n.hc(4,"async"),n.Gc(5,R,3,3,"div",10),n.hc(6,"async"),n.Gc(7,I,3,3,"div",10),n.hc(8,"async"),n.Gc(9,w,3,3,"div",10),n.hc(10,"async"),n.Gc(11,O,3,3,"div",10),n.hc(12,"async"),n.Rb()),2&t){const t=n.gc(2);n.zb(1),n.nc("ngIf",n.ic(2,6,t.settings$).videos.aws.enable),n.zb(2),n.nc("ngIf",n.ic(4,8,t.settings$).videos.direct.enable),n.zb(2),n.nc("ngIf",n.ic(6,10,t.settings$).videos.youtube.enable),n.zb(2),n.nc("ngIf",n.ic(8,12,t.settings$).videos.ffmpeg.enable),n.zb(2),n.nc("ngIf",n.ic(10,14,t.settings$).videos.movie.enable),n.zb(2),n.nc("ngIf",n.ic(12,16,t.settings$).videos.movie.enabled_embed)}}function _(t,e){if(1&t&&(n.Sb(0,"div"),n.Gc(1,v,13,18,"div",8),n.Gc(2,A,13,18,"div",8),n.Rb()),2&t){const t=n.gc();n.zb(1),n.nc("ngIf",t.isAdmin),n.zb(1),n.nc("ngIf",!t.isAdmin)}}let C=(()=>{class t{constructor(t,e,i){this.coreActions=t,this.router=e,this.coreService=i,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Choose Upload Option"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(r.a),n.Mb(a.c),n.Mb(d.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-general-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},decls:11,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[1,"row","justify-content-md-center"],[1,"col-md-6","col-sm-6","col-xs-12"],[4,"ngIf"],["class","m-t-10 text-center",4,"ngIf"],["class","m-t-10",4,"ngIf"],[1,"m-t-10","text-center"],[1,"btn","btn-lg","btn-success","btn-block","text-center","m-b-10",3,"routerLink"],[1,"m-t-10"],[1,"btn","btn-lg","btn-block","btn-success","text-center","m-b-5",3,"routerLink"],[1,"btn","btn-lg","btn-block","btn-success","text-center","m-b-10",3,"routerLink"]],template:function(t,e){1&t&&(n.Sb(0,"div",0),n.Sb(1,"div",1),n.Sb(2,"div",2),n.Sb(3,"div",3),n.Sb(4,"h4",4),n.Ic(5),n.Rb(),n.Rb(),n.Sb(6,"div",5),n.Sb(7,"div",6),n.Sb(8,"div",7),n.Gc(9,_,3,2,"div",8),n.hc(10,"async"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t&&(n.zb(5),n.Jc(e.formHeading),n.zb(4),n.nc("ngIf",n.ic(10,2,e.settings$).videos))},directives:[l.o,a.d],pipes:[l.b],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["configuration","configs"])],t.prototype,"settings$",void 0),t})()},QYT1:function(t,e,i){"use strict";var s=i("mrSG"),o=i("Usal"),c=i("HDdC"),n=i("D0XW"),r=i("Y7HM");function a(t){const{subscriber:e,counter:i,period:s}=t;e.next(i),this.schedule({subscriber:e,counter:i+1,period:s},s)}var d=i("pdjO"),l=i("fXoL"),b=i("VHDF"),h=i("si/t"),u=i("nD3/"),p=i("LEd3"),g=i("+P6t"),f=i("Hjmt"),m=i("tyNb"),v=i("ofXK"),S=i("/H0e"),y=i("4HLj"),R=i("pn3A");function I(t,e){1&t&&(l.Sb(0,"div"),l.Sb(1,"h2",3),l.Ic(2,"Access Denied"),l.Rb(),l.Rb())}function w(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"div",4),l.Sb(2,"div",5),l.Sb(3,"app-navigation-v2",6),l.ec("Action",(function(e){return l.yc(t),l.gc(2).toolbaraction(e)}))("SearchSelection",(function(e){return l.yc(t),l.gc(2).FindRecords(e)})),l.Rb(),l.Rb(),l.Sb(4,"div",7),l.Sb(5,"app-toolbar-v2",8),l.ec("Action",(function(e){return l.yc(t),l.gc(2).toolbaraction(e)}))("SelectAllCard",(function(e){return l.yc(t),l.gc(2).selectAll(e)})),l.Rb(),l.Sb(6,"div",9),l.Sb(7,"app-video-list",10),l.ec("View",(function(e){return l.yc(t),l.gc(2).toolbaraction(e)}))("SelectedItems",(function(e){return l.yc(t),l.gc(2).getSelectedItems(e)})),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&t){const t=l.gc(2);l.zb(3),l.nc("FilterOptions",t.FilterOptions)("Options",t.SearchOptions),l.zb(2),l.nc("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),l.zb(2),l.nc("showReportLink",t.showReportLink)("route_path",t.route_path)("PublicView",t.PublicView)("type",t.type)("isAdmin",t.isAdmin)("isActionGranded",t.isActionGranded)}}function O(t,e){if(1&t&&(l.Sb(0,"div",2),l.Gc(1,I,3,0,"div",1),l.Gc(2,w,8,10,"div",1),l.Rb()),2&t){const t=l.gc();l.zb(1),l.nc("ngIf",!t.isAccessGranted),l.zb(1),l.nc("ngIf",t.isAccessGranted)}}function A(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"app-navigation-v2",11),l.ec("Action",(function(e){return l.yc(t),l.gc().toolbaraction(e)}))("SearchSelection",(function(e){return l.yc(t),l.gc().FindRecords(e)})),l.Rb(),l.Sb(2,"div",2),l.Sb(3,"div",9),l.Sb(4,"app-toolbar-v2",12),l.ec("Action",(function(e){return l.yc(t),l.gc().toolbaraction(e)}))("SelectAllCard",(function(e){return l.yc(t),l.gc().selectAll(e)})),l.Rb(),l.Sb(5,"app-video-list",13),l.ec("View",(function(e){return l.yc(t),l.gc().toolbaraction(e)}))("SelectedItems",(function(e){return l.yc(t),l.gc().getSelectedItems(e)})),l.Rb(),l.Rb(),l.Rb(),l.Rb()}if(2&t){const t=l.gc();l.zb(1),l.nc("isAdmin",t.isAdmin)("FilterOptions",t.FilterOptions)("Options",t.SearchOptions),l.zb(3),l.nc("isAdmin",t.isAdmin)("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),l.zb(1),l.nc("showReportLink",t.showReportLink)("route_path",t.route_path)("PublicView",t.PublicView)("type",t.type)("isAdmin",t.isAdmin)}}i.d(e,"a",(function(){return _}));let _=(()=>{class t{constructor(t,e,i,s,o,c,n,r){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.permission=c,this.router=n,this.route=r,this.isAdmin=!0,this.reload=!1,this.type=0,this.route_path="/videos/",this.PublicView=!1,this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="Videos",this.subheading="Management",this.isItemsSelected=!1,this.IsLoaded=!1,this.Records=0,this.Pagination={},this.Settings={},this.User={},this.showReportLink=!1}ngOnInit(){this.auth$.subscribe(t=>{if(this.User=t.User,this.isAdmin){const e="1521153486644";this.permission.GrandResourceAccess(!1,e,"1521395130448",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}else this.isAccessGranted=!0,this.isActionGranded=!0}),this.ToolbarOptions=this.settingService.getToolbarOptions(this.type,this.isAdmin),this.SearchOptions=this.settingService.getSearchOptions(this.isAdmin,this.Settings),this.filteroptions$.subscribe(t=>{this.FilterOptions=t,this.reload?(this.loadRecords(t),this.actions.toggleReload(!1)):t.track_filter&&(this.loadRecords(t),t.track_filter=!1,this.actions.updateFilterOptions(t),this.actions.toggleReload(!1))}),this.records$.subscribe(t=>{this.Records=t}),this.pagination$.subscribe(t=>{this.Pagination=t}),this.isItemSelected$.subscribe(t=>{this.isItemsSelected=t}),this.categories$.subscribe(t=>{if(this.isAdmin)for(const e of t)this.SearchOptions.categories.push({key:e.id,value:e.title})}),this.settings$.subscribe(t=>{this.Settings=t,void 0!==this.Settings.general&&(this.SearchOptions.actions=this.settingService.getNavActions(this.isAdmin,this.Settings))}),this.route.params.subscribe(t=>{void 0!==t.tagname&&(this.FilterOptions.tags=t.tagname,this.FilterOptions.track_filter=!0,this.actions.updateFilterOptions(this.FilterOptions)),void 0!==t.catname&&(this.FilterOptions.categoryname=t.catname,this.FilterOptions.track_filter=!0,this.actions.updateFilterOptions(this.FilterOptions)),void 0!==t.uname&&(this.FilterOptions.userid=t.uname,this.FilterOptions.track_filter=!0,this.actions.updateFilterOptions(this.FilterOptions)),void 0!==t.abuse&&("abuse"===t.abuse?(this.FilterOptions.loadabusereports=!0,this.showReportLink=!0):"normallist"===t.abuse&&(this.FilterOptions.loadabusereports=!1,this.showReportLink=!1),this.FilterOptions.track_filter=!0,this.actions.updateFilterOptions(this.FilterOptions))}),this.isloaded$.subscribe(t=>{this.IsLoaded=t,!t||this.reload?this.loadRecords(this.FilterOptions):this.refreshStats()}),this.triggerreload$.subscribe(t=>{if(t){const t=function(t=0,e=n.a){return(!Object(r.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=n.a),new c.a(i=>(i.add(e.schedule(a,t,{subscriber:i,counter:0,period:t})),i))}(1e4);this.interval_subscribe=t.subscribe(t=>{console.log("HITTT>>>>"),this.loadRecords(this.FilterOptions)})}else this.interval_subscribe&&this.interval_subscribe.unsubscribe()})}loadRecords(t){switch(this.type){case 0:t.loadliked=!1,t.loadfavorites=!1,t.loadplaylist=!1;break;case 1:t.loadliked=!1,t.loadplaylist=!1,void 0!==t.userid&&""!==t.userid&&(t.loadfavorites=!0);break;case 2:t.loadfavorites=!1,t.loadplaylist=!1,void 0!==t.userid&&""!==t.userid&&(t.loadliked=!0);break;case 2:t.loadliked=!1,t.loadfavorites=!1,t.loadplaylist=!0}this.coreService.renderAbuseReportBtn(this.SearchOptions.actions,t.loadabusereports),this.PublicView&&(t.ispublic=!0),this.dataService.LoadRecords(t)}selectAll(t){this.actions.selectAll({type:this.type,checked:t})}toolbaraction(t){if(this.isActionGranded)switch(t.action){case"upload":return void this.router.navigate([this.route_path+"/uploads"]);case"abuse":return void this.router.navigate([this.route_path+"filter/abuse"]);case"normallist":return void this.router.navigate([this.route_path+"filter/normallist"]);case"reports":return void this.router.navigate([this.route_path+"reports"]);case"m_markas":return void this.ProcessActions(t.value);case"f_type":return void this.actions.applyFilter({attr:"type",value:t.value});case"f_isapproved":this.actions.applyFilter({attr:"isapproved",value:t.value});break;case"f_status":this.actions.applyFilter({attr:"isenabled",value:t.value});break;case"f_featured":this.actions.applyFilter({attr:"isfeatured",value:t.value});break;case"f_adult":this.actions.applyFilter({attr:"isadult",value:t.value});break;case"pagesize":this.actions.applyFilter({attr:"pagesize",value:t.value});break;case"f_private":this.actions.applyFilter({attr:"privacy",value:t.value});break;case"m_filter":this.actions.applyFilter({attr:"datefilter",value:t.value});break;case"sort":this.actions.applyFilter({attr:"direction",value:t.value})}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}FindRecords(t){const e=t.filters;e.tags="",e.categories_str="",e.username="",e.pagenumber=1,e.track_filter=!0,this.actions.updateFilterOptions(e)}getSelectedItems(t){this.SelectedItems=t,this.isItemsSelected=this.SelectedItems.length>0}ProcessActions(t){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus,this.type>0&&(e.userid=this.User.id);this.dataService.ProcessActions(this.SelectedItems,t,this.type)}}refreshStats(){this.actions.refresh_pagination({type:this.type,totalrecords:this.Records,pagesize:this.FilterOptions.pagesize}),this.coreActions.refreshListStats({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage})}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(b.a),l.Mb(h.a),l.Mb(u.a),l.Mb(p.a),l.Mb(g.a),l.Mb(f.a),l.Mb(m.c),l.Mb(m.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-mainvideo-list"]],hostVars:1,hostBindings:function(t,e){2&t&&l.Mc("@fadeInAnimation",void 0)},inputs:{isAdmin:"isAdmin",reload:"reload",type:"type",route_path:"route_path",PublicView:"PublicView"},decls:2,vars:2,consts:[["class","card",4,"ngIf"],[4,"ngIf"],[1,"card"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-3"],[3,"FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"showReportLink","route_path","PublicView","type","isAdmin","isActionGranded","View","SelectedItems"],[3,"isAdmin","FilterOptions","Options","Action","SearchSelection"],[3,"isAdmin","Options","isItemsSelected","Action","SelectAllCard"],[3,"showReportLink","route_path","PublicView","type","isAdmin","View","SelectedItems"]],template:function(t,e){1&t&&(l.Gc(0,O,3,2,"div",0),l.Gc(1,A,6,11,"div",1)),2&t&&(l.nc("ngIf",e.isAdmin),l.zb(1),l.nc("ngIf",!e.isAdmin))},directives:[v.o,S.a,y.a,R.a],encapsulation:2,data:{animation:[d.a]}}),Object(s.a)([Object(o.e)(["videos","filteroptions"])],t.prototype,"filteroptions$",void 0),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["videos","itemsselected"])],t.prototype,"isItemSelected$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["videos","records"])],t.prototype,"records$",void 0),Object(s.a)([Object(o.e)(["videos","pagination"])],t.prototype,"pagination$",void 0),Object(s.a)([Object(o.e)(["videos","settings"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),Object(s.a)([Object(o.e)(["videos","triggerreload"])],t.prototype,"triggerreload$",void 0),t})()},eXLi:function(t,e,i){"use strict";i.d(e,"a",(function(){return F}));var s=i("mrSG"),o=i("Usal"),c=i("zIGt"),n=i("YaUu"),r=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("si/t"),b=i("LEd3"),h=i("+P6t"),u=i("tyNb"),p=i("ow1T"),g=i("nD3/"),f=i("1pjZ"),m=i("ofXK"),v=i("9BpC"),S=i("3Pt+"),y=i("RDfn"),R=i("+kG/");const I=function(){return[]};function w(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"app-uploader",9),d.ec("OnUploaded",(function(e){return d.yc(t),d.gc(2).OnUploadedVideos(e)})),d.Rb(),d.Rb()}if(2&t){const t=d.gc(2);d.zb(1),d.nc("Info",t.Auth.User)("extensions",t.extensions)("max_concurrent_uploads",t.max_concurrent_uploads)("filesize",t.filesize)("uploadedFiles",d.rc(5,I))}}function O(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",11),d.Sb(1,"div",0),d.Sb(2,"div",1),d.Sb(3,"h4"),d.Ic(4),d.Rb(),d.Rb(),d.Rb(),d.Sb(5,"div",0),d.Sb(6,"div",12),d.Nb(7,"img",13),d.Rb(),d.Sb(8,"div",14),d.Sb(9,"div",15),d.Sb(10,"input",16),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.title=i})),d.Rb(),d.Rb(),d.Sb(11,"div",15),d.Sb(12,"textarea",17),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.description=i})),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,i=d.gc(3);d.zb(4),d.Jc(t.filename),d.zb(3),d.pc("src","",i.config.getGlobalVar("img_directory"),"video-thumbnail.jpg",d.Bc),d.zb(3),d.nc("ngModel",t.title),d.zb(2),d.nc("ngModel",t.description)}}function A(t,e){if(1&t&&(d.Sb(0,"div"),d.Gc(1,O,13,4,"div",10),d.hc(2,"async"),d.Rb()),2&t){const t=d.gc(2);d.zb(1),d.nc("ngForOf",d.ic(2,1,t.uploadedfiles$))}}function _(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",18),d.Sb(1,"button",19),d.ec("click",(function(){return d.yc(t),d.gc(2).nextPanel()})),d.Ic(2,"Next"),d.Rb(),d.Rb()}}function C(t,e){if(1&t&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4",5),d.Ic(3),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,w,2,6,"div",7),d.hc(6,"async"),d.Gc(7,A,3,3,"div",7),d.hc(8,"async"),d.Rb(),d.Gc(9,_,3,0,"div",8),d.hc(10,"async"),d.Rb()),2&t){const t=d.gc();d.zb(3),d.Jc(t.formHeading),d.zb(2),d.nc("ngIf",0===d.ic(6,4,t.uploadedfiles$).length),d.zb(2),d.nc("ngIf",d.ic(8,6,t.uploadedfiles$).length>0),d.zb(2),d.nc("ngIf",d.ic(10,8,t.uploadedfiles$).length>0)}}function z(t,e){1&t&&d.Nb(0,"app-loader")}function x(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",21),d.ec("OnSubmit",(function(e){return d.yc(t),d.gc(2).SubmitForm(e)}))("OnClose",(function(e){return d.yc(t),d.gc(2).Cancel(e)})),d.Rb()}if(2&t){const t=d.gc(2);d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",t.showCancel)("cancelText",t.cancelText)("showModal",!1)("submitText",t.submitText)}}function M(t,e){if(1&t&&(d.Sb(0,"div",3),d.Sb(1,"div",4),d.Sb(2,"h4"),d.Ic(3,"Update Information"),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Gc(5,z,1,0,"app-loader",7),d.Gc(6,x,1,6,"dynamic-modal-form",20),d.Rb(),d.Rb()),2&t){const t=d.gc();d.zb(5),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader)}}let F=(()=>{class t{constructor(t,e,i,s,o,c,n,r){this.dataService=t,this.coreActions=e,this.actions=i,this.router=s,this.formService=o,this.coreService=c,this.categoryDataService=n,this.config=r,this.isAdmin=!0,this.route_path="/videos/",this.formHeading="Upload Videos",this.Auth={},this.showLoader=!1,this.Panel=0,this.VideoInfo={tags:"",category:""},this.extensions="mp4,avi,wmv,mpg,mpeg,webm,flv,ogv",this.filesize="1000mb",this.max_concurrent_uploads=5,this.Categories=[],this.controls=[],this.submitText="Save Changes",this.showCancel=!0,this.cancelText="Back",this.Settings={},this.UploadedFiles=[]}ngOnInit(){this.auth$.subscribe(t=>{this.Auth=t}),this.categories$.subscribe(t=>{t.length>0?this.Categories=t:(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(0))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t),this.showLoader=!1}),this.settings$.subscribe(t=>{this.Settings=t,void 0!==this.Settings.videos.general&&(this.extensions=this.Settings.videos.general.extensions,this.filesize=this.Settings.videos.general.max_size,this.max_concurrent_uploads=this.Settings.videos.general.max_concurrent_uploads)}),this.uploadedfiles$.subscribe(t=>{this.UploadedFiles=t})}OnUploadedVideos(t){for(const e of t)e.id=0,e.title="",e.sf=e.filename,e.description="",e.categories="",e.privacy=0,e.userid=this.Auth.User.id,e.albumid=0,e.type=0;this.actions.uploadedVideoFiles(t)}nextPanel(){this.Panel=1,this.initializeControls({tags:"",category_list:[]})}Cancel(t){this.Panel=0}initializeControls(t){this.controls=this.formService.uploaderOptionControls(t),this.updateCategories()}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}SubmitForm(t){if(this.UploadedFiles.length>0){for(let e of this.UploadedFiles)e.tags=t.tags,e.categories=this.coreService.returnSelectedCategoryArray(t.categories),e.userid=this.Auth.User.id;this.processVideos(this.UploadedFiles)}}processVideos(t){this.showLoader=!0,this.dataService.AddAWSVideos(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.actions.resetPublishing(),this.coreActions.Notify({title:"Uploaded videos submitted for processing",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.actions.loadEnd(),this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l.a),d.Mb(b.a),d.Mb(h.a),d.Mb(u.c),d.Mb(p.a),d.Mb(g.a),d.Mb(c.a),d.Mb(f.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-aws-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([c.a,n.a,r.a])],decls:5,vars:4,consts:[[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card-footer",4,"ngIf"],[3,"Info","extensions","max_concurrent_uploads","filesize","uploadedFiles","OnUploaded"],["class","m-b-10",4,"ngFor","ngForOf"],[1,"m-b-10"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"form-group"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit","OnClose",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit","OnClose"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Gc(2,C,11,10,"div",2),d.Gc(3,M,7,2,"div",2),d.hc(4,"async"),d.Rb(),d.Rb()),2&t&&(d.zb(2),d.nc("ngIf",0===e.Panel),d.zb(1),d.nc("ngIf",1===e.Panel&&!d.ic(4,2,e.loading$)))},directives:[m.o,v.a,m.n,S.c,S.n,S.q,y.a,R.a],pipes:[m.b],encapsulation:2,data:{animation:[a.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],t.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["videos","loading"])],t.prototype,"loading$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["videos","uploadedfiles"])],t.prototype,"uploadedfiles$",void 0),Object(s.a)([Object(o.e)(["configuration","configs"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},jL45:function(t,e,i){"use strict";i.d(e,"a",(function(){return $}));var s=i("mrSG"),o=i("Usal"),c=i("pdjO"),n=i("zIGt"),r=i("YaUu"),a=i("t+rW"),d=i("fXoL"),l=i("si/t"),b=i("nD3/"),h=i("LEd3"),u=i("+P6t"),p=i("tyNb"),g=i("ow1T"),f=i("ofXK"),m=i("RDfn"),v=i("3Pt+"),S=i("+kG/");function y(t,e){1&t&&d.Nb(0,"app-loader")}function R(t,e){if(1&t){const t=d.Tb();d.Sb(0,"a",15),d.ec("click",(function(e){return d.yc(t),d.gc(2).showAdvanceOptions(e),!1})),d.Ic(1,"Advance Options"),d.Rb()}}function I(t,e){if(1&t&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&t){const t=e.$implicit;d.oc("value",t.id),d.zb(1),d.Jc(t.title)}}function w(t,e){if(1&t&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&t){const t=e.$implicit;d.oc("value",t.id),d.zb(1),d.Jc(t.title)}}function O(t,e){if(1&t&&(d.Sb(0,"option",25),d.Ic(1),d.Rb()),2&t){const t=e.$implicit;d.oc("value",t.id),d.zb(1),d.Jc(t.title)}}function A(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",16),d.Sb(1,"div",1),d.Sb(2,"div",17),d.Sb(3,"input",18),d.ec("ngModelChange",(function(e){return d.yc(t),d.gc(2).YoutubeQuery.username=e})),d.Rb(),d.Rb(),d.Sb(4,"div",17),d.Sb(5,"select",19),d.ec("ngModelChange",(function(e){return d.yc(t),d.gc(2).YoutubeQuery.youtubecategory=e})),d.Sb(6,"option",20),d.Ic(7,"Select Youtube Category"),d.Rb(),d.Gc(8,I,2,2,"option",21),d.hc(9,"async"),d.Rb(),d.Rb(),d.Sb(10,"div",17),d.Sb(11,"select",22),d.Gc(12,w,2,2,"option",21),d.Rb(),d.Rb(),d.Sb(13,"div",17),d.Sb(14,"select",23),d.Gc(15,O,2,2,"option",21),d.Rb(),d.Rb(),d.Sb(16,"div",17),d.Sb(17,"button",24),d.ec("click",(function(){return d.yc(t),d.gc(2).submitYoutube()})),d.Ic(18," Search "),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.gc(2);d.zb(3),d.nc("ngModel",t.YoutubeQuery.username),d.zb(2),d.nc("ngModel",t.YoutubeQuery.youtubecategory),d.zb(3),d.nc("ngForOf",d.ic(9,5,t.YoutubeCategories$).youtubeCategories),d.zb(4),d.nc("ngForOf",t.YoutubeOrderList),d.zb(3),d.nc("ngForOf",t.YoutubeDateList)}}function _(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",0),d.Sb(2,"div",8),d.Sb(3,"div",9),d.Sb(4,"input",10),d.ec("ngModelChange",(function(e){return d.yc(t),d.gc().YoutubeQuery.term=e})),d.Rb(),d.Sb(5,"span",11),d.Sb(6,"button",12),d.ec("click",(function(){return d.yc(t),d.gc().submitYoutube()})),d.Ic(7," Search "),d.Rb(),d.Rb(),d.Rb(),d.Gc(8,R,2,0,"a",13),d.Rb(),d.Rb(),d.Gc(9,A,19,7,"div",14),d.Rb()}if(2&t){const t=d.gc();d.zb(4),d.nc("ngModel",t.YoutubeQuery.term),d.zb(4),d.nc("ngIf",!t.YoutubeQuery.advanceoption),d.zb(1),d.nc("ngIf",t.YoutubeQuery.advanceoption)}}function C(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",0),d.Sb(1,"div",30),d.Nb(2,"img",31),d.Rb(),d.Sb(3,"div",32),d.Sb(4,"button",33),d.ec("click",(function(i){d.yc(t);const s=e.index;return d.gc(3).removeYt_Video(s,i),!1})),d.Nb(5,"i",34),d.Rb(),d.Sb(6,"div",17),d.Sb(7,"input",35),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.title=i})),d.Rb(),d.Rb(),d.Sb(8,"div",17),d.Sb(9,"textarea",36),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.description=i})),d.Rb(),d.Rb(),d.Sb(10,"div",17),d.Sb(11,"input",37),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.duration=i})),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit;d.zb(2),d.oc("src",t.preview_url,d.Bc),d.zb(5),d.nc("ngModel",t.title),d.zb(2),d.nc("ngModel",t.description),d.zb(2),d.nc("ngModel",t.duration)}}function z(t,e){if(1&t&&(d.Sb(0,"div",5),d.Gc(1,C,12,4,"div",29),d.Rb()),2&t){const t=d.gc(2);d.zb(1),d.nc("ngForOf",t.YoutubeSearchResult)}}function x(t,e){1&t&&d.Nb(0,"app-loader")}function M(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",39),d.ec("OnSubmit",(function(e){return d.yc(t),d.gc(3).SubmitForm(e)})),d.Rb()}if(2&t){const t=d.gc(3);d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",!1)("showModal",!1)("submitText",t.submitText)}}function F(t,e){if(1&t&&(d.Sb(0,"div",5),d.Gc(1,x,1,0,"app-loader",6),d.Gc(2,M,1,5,"dynamic-modal-form",38),d.Rb()),2&t){const t=d.gc(2);d.zb(1),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader)}}function L(t,e){if(1&t){const t=d.Tb();d.Sb(0,"button",24),d.ec("click",(function(){return d.yc(t),d.gc(2).nextstep()})),d.Ic(1," Next "),d.Rb()}}function G(t,e){if(1&t&&(d.Sb(0,"div",2),d.Sb(1,"div",3),d.Sb(2,"h4",4),d.Ic(3,"Search Result"),d.Rb(),d.Rb(),d.Gc(4,z,2,1,"div",26),d.Gc(5,F,3,2,"div",26),d.Sb(6,"div",27),d.Gc(7,L,2,0,"button",28),d.Rb(),d.Rb()),2&t){const t=d.gc();d.zb(4),d.nc("ngIf",t.step1),d.zb(1),d.nc("ngIf",t.step2),d.zb(2),d.nc("ngIf",t.step1)}}let $=(()=>{class t{constructor(t,e,i,s,o,c,n){this.dataService=t,this.coreService=e,this.coreActions=i,this.actions=s,this.router=o,this.categoryDataService=c,this.formService=n,this.isAdmin=!0,this.route_path="/videos/",this.YoutubeQuery={term:"",advanceoption:!1,userid:"",youtubecategory:"",order:0,date:0},this.YoutubeOrderList=[{id:0,title:"Date"},{id:1,title:"Rating"},{id:2,title:"Relevance"},{id:3,title:"Title"},{id:4,title:"VideoCount"},{id:5,title:"ViewCount"}],this.YoutubeDateList=[{id:3,title:"All Time"},{id:0,title:"Today"},{id:1,title:"This Week"},{id:2,title:"This Month"}],this.YoutubeResult={tags:"",category:""},this.YoutubeSearchResult=[],this.formHeading="Upload Videos",this.IsLoaded=!1,this.controls=[],this.step1=!0,this.step2=!1,this.Auth={},this.Categories=[],this.showLoader=!1,this.submitText="Save Changes"}ngOnInit(){this.dataService.LoadYoutubeCategories(),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded||this.router.navigate([this.route_path])}),this.auth$.subscribe(t=>{this.Auth=t,this.YoutubeQuery.userid=this.Auth.User.id}),this.YoutubeSearchResult$.subscribe(t=>{this.YoutubeSearchResult=t}),this.categories$.subscribe(t=>{t.length>0?(this.Categories=t,this.updateCategories()):(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(0))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t,this.updateCategories()),this.showLoader=!1})}submitYoutube(){this.dataService.SearchYoutube(this.YoutubeQuery)}showAdvanceOptions(t){this.YoutubeQuery.advanceoption=!0,t.stopPropagation()}nextstep(){this.step1=!1,this.step2=!0,this.initializeControls({tags:"",category_list:[]})}initializeControls(t){this.controls=this.formService.uploaderOptionControls(t),this.updateCategories()}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}SubmitForm(t){if(0!==this.YoutubeSearchResult.length){this.showLoader=!0;for(const e of this.YoutubeSearchResult)e.tags=t.tags,e.categories=this.coreService.returnSelectedCategoryArray(t.categories),e.userid=this.Auth.User.id;this.dataService.AddYoutubeVideos(this.YoutubeSearchResult).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.actions.cleanupYoutubeSearchResult(),this.coreActions.Notify({title:"Videos processed successfully",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.actions.loadEnd(),this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}else this.coreActions.Notify({title:"Please select atleast one video to proceed",text:"",css:"bg-danger"})}removeYt_Video(t,e){t>-1&&(console.log("splice hit"),this.YoutubeSearchResult.splice(t,1)),e.stopPropagation=!0}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l.a),d.Mb(b.a),d.Mb(h.a),d.Mb(u.a),d.Mb(p.c),d.Mb(n.a),d.Mb(g.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-youtube-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([n.a,r.a,a.a])],decls:12,vars:8,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"col-lg-12"],[1,"input-group"],["type","text","placeholder","Enter youtube url or search term",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-btn"],["type","button",1,"btn","btn-success",3,"click"],["href","",3,"click",4,"ngIf"],["class","row m-t-10",4,"ngIf"],["href","",3,"click"],[1,"row","m-t-10"],[1,"form-group"],["type","text","placeholder","Enter username",1,"form-control",3,"ngModel","ngModelChange"],["chosen","{width: '100%'}",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["ng-model","YoutubeQuery.order",1,"form-control"],["ng-model","YoutubeQuery.date",1,"form-control"],[1,"btn","btn-primary",3,"click"],[3,"value"],["class","card-body",4,"ngIf"],[1,"card-footer"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"img-responsive",3,"src"],[1,"col-md-8"],[1,"float-right",3,"click"],[1,"fa","fa-times"],["type","text","placeholder","Enter title",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter duration",1,"form-control",3,"ngModel","ngModelChange"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Sb(4,"h4",4),d.Ic(5),d.Rb(),d.Rb(),d.Sb(6,"div",5),d.Gc(7,y,1,0,"app-loader",6),d.hc(8,"async"),d.Gc(9,_,10,3,"div",6),d.hc(10,"async"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Gc(11,G,8,3,"div",7)),2&t&&(d.zb(5),d.Jc(e.formHeading),d.zb(2),d.nc("ngIf",d.ic(8,4,e.loading$)),d.zb(2),d.nc("ngIf",!d.ic(10,6,e.loading$)),d.zb(2),d.nc("ngIf",e.YoutubeSearchResult.length>0))},directives:[f.o,m.a,v.c,v.n,v.q,v.v,v.s,v.x,f.n,S.a],pipes:[f.b],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],t.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["videos","yt_categories"])],t.prototype,"YoutubeCategories$",void 0),Object(s.a)([Object(o.e)(["videos","yt_result"])],t.prototype,"YoutubeSearchResult$",void 0),Object(s.a)([Object(o.e)(["videos","loading"])],t.prototype,"loading$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},v6bp:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var s=i("mrSG"),o=i("Usal"),c=i("zIGt"),n=i("YaUu"),r=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("si/t"),b=i("LEd3"),h=i("+P6t"),u=i("tyNb"),p=i("ow1T"),g=i("nD3/"),f=i("1pjZ"),m=i("ofXK"),v=i("RDfn"),S=i("+kG/");function y(t,e){1&t&&d.Nb(0,"app-loader")}function R(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",7),d.ec("OnSubmit",(function(e){return d.yc(t),d.gc().SubmitForm(e)})),d.Rb()}if(2&t){const t=d.gc();d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",t.showCancel)("cancelText",t.cancelText)("showModal",!1)("submitText",t.submitText)}}let I=(()=>{class t{constructor(t,e,i,s,o,c,n,r){this.dataService=t,this.coreActions=e,this.actions=i,this.router=s,this.formService=o,this.coreService=c,this.categoryDataService=n,this.config=r,this.isAdmin=!0,this.route_path="/videos/",this.uploadType=0,this.formHeading="Upload Movie",this.Auth={},this.showLoader=!1,this.Categories=[],this.controls=[],this.submitText="Save Changes",this.showCancel=!1,this.cancelText="Cancel",this.Settings={}}ngOnInit(){this.auth$.subscribe(t=>{this.Auth=t}),this.categories$.subscribe(t=>{t.length>0?(this.Categories=t,this.initializeControls()):(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(0))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t,this.initializeControls()),this.showLoader=!1}),this.settings$.subscribe(t=>{this.Settings=t})}initializeControls(){0===this.uploadType?this.initializeMovieControls():this.initializeEmbedControls(),this.updateCategories()}initializeMovieControls(){this.controls=this.formService.uploadMovieControls({title:"",description:"",tags:"",category_list:[],duration:"",movietype:0,preview_url:"",pub_url:"",org_url:"",thumb_url:"",coverurl:"",price:0,isapproved:0})}initializeEmbedControls(){this.controls=this.formService.embedVideoControls({title:"",description:"",tags:"",category_list:[],movietype:0,embed_script:"",isapproved:0,thumb_url:""})}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}SubmitForm(t){this.showLoader=!0,t.userid=this.Auth.User.id,t.categories=this.coreService.returnSelectedCategoryArray(t.categories),0===this.uploadType?this.SubmitMovieForm(t):this.SubmitEmbedForm(t)}SubmitMovieForm(t){this.dataService.AddMovie(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.actions.resetPublishing(),this.coreActions.Notify({title:"Movie Information Submitted",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.actions.loadEnd(),this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}SubmitEmbedForm(t){t.isexternal=1,this.dataService.EmbedVideo(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.actions.resetPublishing(),this.coreActions.Notify({title:"Video Submitted",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.actions.loadEnd(),this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l.a),d.Mb(b.a),d.Mb(h.a),d.Mb(u.c),d.Mb(p.a),d.Mb(g.a),d.Mb(c.a),d.Mb(f.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-movie-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path",uploadType:"uploadType"},features:[d.yb([c.a,n.a,r.a])],decls:9,vars:3,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","cancelText","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Sb(4,"h4"),d.Ic(5),d.Rb(),d.Rb(),d.Sb(6,"div",4),d.Gc(7,y,1,0,"app-loader",5),d.Gc(8,R,1,6,"dynamic-modal-form",6),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.zb(5),d.Jc(e.formHeading),d.zb(2),d.nc("ngIf",e.showLoader),d.zb(1),d.nc("ngIf",!e.showLoader))},directives:[m.o,v.a,S.a],encapsulation:2,data:{animation:[a.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],t.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["configuration","configs"])],t.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()},wHF2:function(t,e,i){"use strict";i.d(e,"a",(function(){return M}));var s=i("mrSG"),o=i("Usal"),c=i("zIGt"),n=i("YaUu"),r=i("t+rW"),a=i("pdjO"),d=i("fXoL"),l=i("VHDF"),b=i("si/t"),h=i("nD3/"),u=i("LEd3"),p=i("+P6t"),g=i("tyNb"),f=i("ow1T"),m=i("1pjZ"),v=i("ofXK"),S=i("RDfn"),y=i("+kG/"),R=i("3Pt+");function I(t,e){1&t&&d.Nb(0,"app-loader")}function w(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",9),d.ec("OnSubmit",(function(e){return d.yc(t),d.gc(3).SubmitForm(e)})),d.Rb()}if(2&t){const t=d.gc(3);d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",!1)("showModal",!1)("submitText",t.submitText)}}function O(t,e){if(1&t&&(d.Sb(0,"div"),d.Gc(1,w,1,5,"dynamic-modal-form",8),d.Rb()),2&t){const t=d.gc(2);d.zb(1),d.nc("ngIf",!t.showLoader)}}function A(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",28),d.Nb(2,"img",29),d.Sb(3,"div",6),d.Sb(4,"p",30),d.Sb(5,"a",31),d.ec("click",(function(i){d.yc(t);const s=e.index,o=d.gc().$implicit;return d.gc(3).delete(o,s,i),!1})),d.Nb(6,"i",32),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit;d.zb(2),d.oc("src",t.url,d.Bc),d.oc("alt",t.fname)}}function _(t,e){if(1&t){const t=d.Tb();d.Sb(0,"tr"),d.Sb(1,"td",13),d.Sb(2,"div",14),d.Sb(3,"video",15),d.Nb(4,"source",16),d.Rb(),d.Rb(),d.Sb(5,"div",14),d.Sb(6,"button",17),d.ec("click",(function(){d.yc(t);const i=e.$implicit;return d.gc(3).captureDuration(i)})),d.Ic(7," Capture Duration "),d.Rb(),d.Rb(),d.Sb(8,"div",18),d.Sb(9,"input",19),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.thumb_url=i})),d.Rb(),d.Rb(),d.Sb(10,"div",18),d.Sb(11,"input",20),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.title=i})),d.Rb(),d.Rb(),d.Sb(12,"div",18),d.Sb(13,"textarea",21),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.description=i})),d.Rb(),d.Rb(),d.Sb(14,"div",18),d.Sb(15,"input",22),d.ec("ngModelChange",(function(i){return d.yc(t),e.$implicit.duration=i})),d.Rb(),d.Rb(),d.Sb(16,"p",23),d.Sb(17,"a",24),d.ec("click",(function(i){d.yc(t);const s=e.index;return d.gc(3).remove(s,i),!1})),d.Nb(18,"i",25),d.Rb(),d.Rb(),d.Rb(),d.Sb(19,"td",26),d.Nb(20,"div",27),d.Gc(21,A,7,2,"div",11),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit;d.zb(3),d.pc("id","vd_",t.id,""),d.zb(1),d.oc("src",t.url,d.Bc),d.zb(5),d.nc("ngModel",t.thumb_url),d.zb(2),d.nc("ngModel",t.title),d.zb(2),d.nc("ngModel",t.description),d.zb(2),d.nc("ngModel",t.duration),d.zb(5),d.pc("id","view_",t.id,""),d.zb(1),d.nc("ngForOf",t.video_thumbs)}}function C(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",33),d.Sb(1,"button",34),d.ec("click",(function(){return d.yc(t),d.gc(3).saveChanges()})),d.Ic(2," Save Changes "),d.Rb(),d.Rb()}}function z(t,e){if(1&t&&(d.Sb(0,"div"),d.Sb(1,"h3"),d.Ic(2,"Uploaded Video Processing"),d.Rb(),d.Sb(3,"table",10),d.Gc(4,_,22,8,"tr",11),d.Rb(),d.Gc(5,C,3,0,"div",12),d.Rb()),2&t){const t=d.gc(2);d.zb(4),d.nc("ngForOf",t.UploadedFiles.files),d.zb(1),d.nc("ngIf",t.UploadedFiles.files.length>0)}}function x(t,e){if(1&t&&(d.Sb(0,"div"),d.Gc(1,O,2,1,"div",7),d.Gc(2,z,6,2,"div",7),d.Rb()),2&t){const t=d.gc();d.zb(1),d.nc("ngIf",1===t.Steps),d.zb(1),d.nc("ngIf",2===t.Steps)}}let M=(()=>{class t{constructor(t,e,i,s,o,c,n,r,a,d){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.route=c,this.formService=n,this.categoryDataService=r,this.router=a,this.config=d,this.isAdmin=!0,this.route_path="/videos/",this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Upload Videos",this.submitText="Submit",this.IsLoaded=!1,this.Categories=[],this.UploadedFiles=[],this.Steps=1,this.URL="",this.Auth={}}ngOnInit(){this.URL=this.config.getConfig("host"),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded||this.router.navigate(["/videos/"])}),this.auth$.subscribe(t=>{this.Auth=t}),this.route.params.subscribe(t=>{this.RecordID=Number.parseInt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0||(this.Info=this.settingService.getInitObject(),this.initializeControls(this.Info))}),this.categories$.subscribe(t=>{t.length>0?(this.Categories=t,this.updateCategories()):(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(0))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t,this.updateCategories()),this.showLoader=!1})}LoadInfo(){}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}initializeControls(t){this.controls=this.formService.getControls(t,this.Auth),this.updateCategories()}makeid(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}gDur(t){const e=Math.floor(t/3600);let i="";t-=3600*e,e<10&&(i="0"+e);const s=Math.floor(t/60);let o="";t-=60*s,s<10&&(o="0"+s);const c=Math.floor(t/1);let n="";return t-=1*c,n=c<10?"0"+c:c.toString(),i+":"+o+":"+n}attachthumbnails(t){console.log(t),this.TriggleModal(t)}TriggleModal(t){}delete(t,e,i){e>-1&&t.video_thumbs.splice(e,1),i.stopPropagation()}capture(t){console.log(t);const e=this.makeid(),i=document.getElementById("vd_"+t.id),s=(this.gDur(i.duration),document.createElement("canvas"));s.id=e,s.width=800,s.height=600,s.style.zIndex=8,s.style.border="1px solid",s.getContext("2d").drawImage(i,0,0,800,600),document.getElementById("view_"+t.id).appendChild(s);const o="temp_"+e,c=document.createElement("canvas");c.id=o,c.width=180,c.height=120,c.style.zIndex=8,c.style.border="1px solid",c.getContext("2d").drawImage(i,0,0,180,120);let n=!1;0===t.video_thumbs.length&&(n=!0),t.video_thumbs.push({id:e,temp:c.toDataURL(),filename:s.toDataURL(),selected:n})}SubmitForm(t){if(t.files.length>0){for(const e of t.files)e.id=this.makeid(),e.videofilename=e.filename,e.title="",e.thumb_url="",e.description="",e.duration="",e.duration_sec=0,e.userid=this.Auth.User.id,e.video_thumbs=[],e.categories=this.coreService.returnSelectedCategoryArray(t.categories),e.tags=t.tags;this.UploadedFiles=t,this.Steps=2}}captureDuration(t){const e=document.getElementById("vd_"+t.id);t.duration_sec=e.duration,t.duration=this.gDur(e.duration)}saveChanges(){this.showLoader=!0;for(const t of this.UploadedFiles.files)t.duration_sec=parseInt(t.duration_sec,10),t.id=0;this.dataService.DirectVideo(this.UploadedFiles.files).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.coreActions.Notify({title:"Record Processed Successfully",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate([this.route_path])),this.showLoader=!1},t=>{this.showLoader=!1,this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}remove(t,e){t>-1&&this.UploadedFiles.files.splice(t,1),e.stopPropagation=!0}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(l.a),d.Mb(b.a),d.Mb(h.a),d.Mb(u.a),d.Mb(p.a),d.Mb(g.a),d.Mb(f.a),d.Mb(c.a),d.Mb(g.c),d.Mb(m.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-direct-uploader"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([c.a,n.a,r.a])],decls:11,vars:3,consts:[[1,"row"],[1,"col-lg-12"],[1,"col-md-9"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"],[1,"table"],[4,"ngFor","ngForOf"],["class","m-b-10 m-t-10",4,"ngIf"],[2,"width","70%"],[1,"m-b-10"],["controls","",2,"width","100%","height","auto","height","auto",3,"id"],["type","video/mp4",3,"src"],["title","Capture duration from video",1,"btn","btn-danger","m-r-5",3,"click"],[1,"form-group"],["type","text","placeholder","Enter Thumb Url",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter title (optional)",1,"form-control",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description (optional)",1,"form-control",3,"ngModel","ngModelChange"],["type","text","readonly","true","placeholder","Enter duration",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-text","text-center"],[3,"click"],["aria-hidden","true",1,"fa","fa-close","text-danger"],[2,"width","30%"],[2,"display","none",3,"id"],[1,"card-img-top","img-responsive"],[1,"card-img-top",2,"cursor","pointer",3,"src","alt"],[1,"center-text"],["href","#","data-toggle","tooltip","data-original-title","Close",3,"click"],[1,"fa","fa-close","text-danger"],[1,"m-b-10","m-t-10"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",0),d.Sb(3,"div",2),d.Sb(4,"div",3),d.Sb(5,"div",4),d.Sb(6,"h4",5),d.Ic(7),d.Rb(),d.Rb(),d.Sb(8,"div",6),d.Gc(9,I,1,0,"app-loader",7),d.Gc(10,x,3,2,"div",7),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.zb(7),d.Jc(e.formHeading),d.zb(2),d.nc("ngIf",e.showLoader),d.zb(1),d.nc("ngIf",!e.showLoader))},directives:[v.o,S.a,y.a,v.n,R.c,R.n,R.q],encapsulation:2,data:{animation:[a.a]}}),Object(s.a)([Object(o.e)(["videos","categories"])],t.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],t.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["videos","isloaded"])],t.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],t.prototype,"auth$",void 0),t})()}}]);