function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{vPjw:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),s=i("3Pt+"),o=i("tyNb"),r=i("fXoL"),a=i("1pjZ"),c=i("mrSG"),p=i("Usal"),u=i("noRM"),d=i("aRip"),l=i("nD3/"),b=i("LEd3"),f=i("nT4z"),h=i("Pfcf"),g=i("RDfn"),m=i("+kG/");function S(e,t){1&e&&r.Nb(0,"app-loader")}function v(e,t){1&e&&(r.Sb(0,"h1"),r.Ic(1,"Database Setup"),r.Rb())}function y(e,t){1&e&&(r.Sb(0,"h1"),r.Ic(1,"Website Setup"),r.Rb())}function _(e,t){if(1&e&&(r.Sb(0,"div",10),r.Sb(1,"h2"),r.Ic(2),r.Rb(),r.Nb(3,"hr"),r.Rb()),2&e){var i=r.gc(2);r.zb(2),r.Jc(i.formHeading)}}function w(e,t){1&e&&r.Nb(0,"app-loader")}function I(e,t){if(1&e){var i=r.Tb();r.Sb(0,"dynamic-modal-form",13),r.ec("OnSubmit",(function(e){return r.yc(i),r.gc(3).SubmitForm(e)}))("OnSkip",(function(e){return r.yc(i),r.gc(3).SkipForm(e)})),r.Rb()}if(2&e){var n=r.gc(3);r.nc("controls",n.controls)("showCancel",!1)("skipBtnText",n.skipBtnText)("showModal",!1)("submitText",n.submitText)}}function T(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"div",11),r.Gc(2,w,1,0,"app-loader",5),r.Gc(3,I,1,5,"dynamic-modal-form",12),r.Rb(),r.Rb()),2&e){var i=r.gc(2);r.zb(2),r.nc("ngIf",i.showProcessing),r.zb(1),r.nc("ngIf",!i.showProcessing&&i.controls.length>0)}}function C(e,t){1&e&&(r.Sb(0,"div"),r.Sb(1,"h4",14),r.Ic(2,"Database connection configured"),r.Rb(),r.Sb(3,"p",8),r.Ic(4," You need to restart your application to start database tables, user setup and other configurations "),r.Rb(),r.Rb())}function R(e,t){1&e&&(r.Sb(0,"div"),r.Sb(1,"h4",15),r.Ic(2," Setup completed. Please restart and use your application. "),r.Rb(),r.Rb())}function x(e,t){if(1&e&&(r.Sb(0,"div"),r.Gc(1,C,5,0,"div",5),r.Gc(2,R,3,0,"div",5),r.Rb()),2&e){var i=r.gc(2);r.zb(1),r.nc("ngIf",0===i.SetupType),r.zb(1),r.nc("ngIf",1===i.SetupType)}}function k(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"div",6),r.Gc(2,v,2,0,"h1",5),r.Gc(3,y,2,0,"h1",5),r.Nb(4,"hr"),r.Rb(),r.Gc(5,_,4,1,"div",7),r.Gc(6,T,4,2,"div",5),r.Gc(7,x,3,2,"div",5),r.Sb(8,"div",8),r.Sb(9,"p"),r.Ic(10," Note: Setup process only handles core configurations, for specific contents related or detail configuration management, please go to control panel -> settings -> configurations page. "),r.Rb(),r.Sb(11,"p",9),r.Ic(12," Warning: Please remove setup or installation page from from deployed application "),r.Rb(),r.Rb(),r.Rb()),2&e){var i=r.gc();r.zb(2),r.nc("ngIf",0===i.SetupType),r.zb(1),r.nc("ngIf",1===i.SetupType),r.zb(2),r.nc("ngIf",1===i.SetupType&&!i.finalstep),r.zb(1),r.nc("ngIf",!i.finalstep),r.zb(1),r.nc("ngIf",i.finalstep)}}var G,O,P,z=((O=function(){function e(t,i,n,s,o,r){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=n,this.coreActions=s,this.actions=o,this.formService=r,this.SetupType=0,this.Configs=[],this.Configurations={},this.formHeading="",this.submitText="Next",this.skipBtnText="",this.primay_prop="",this.child_prop="",this.controls=[],this.showProcessing=!1,this.finalstep=!1,this.primary_prop_steps=["general","general","general","general","general","general","general","general","general","general","videos","videos","videos","videos","videos"],this.child_prop_steps=["dbusersetup","general","features","authentication","registration","rechapcha","aws","social","contact","smtp","general","aws","ffmpeg","youtube","player"],this.stepIndex=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;0===this.SetupType&&(this.submitText="Save Changes"),this.isloaded$.subscribe((function(t){t||e.loadRecords()})),this.Configurations$.subscribe((function(t){e.Configurations=t,0===e.SetupType?e.renderForm("general","dbsetup"):e.renderForm(e.primary_prop_steps[e.stepIndex],e.child_prop_steps[e.stepIndex])}))}},{key:"loadRecords",value:function(){this.dataService.LoadRecords()}},{key:"renderForm",value:function(e,t){var i={};this.formHeading="",this.primay_prop=e,this.child_prop=t,this.formHeading=t[0].toUpperCase()+t.slice(1)+" Settings","videos"===e&&(this.formHeading="[Videos] "+this.formHeading),"dbsetup"===t?i={host:"",database:"",userid:"",password:""}:"dbusersetup"===t?(this.formHeading="Create Admin User",i={username:"",email:"",firstname:"",lastname:"",password:""}):i=this.Configurations[e][t],this.controls=this.formService.getControls(i,e,t,!0)}},{key:"SubmitForm",value:function(e){var t=this,i=e;if("dbsetup"!==this.child_prop&&"dbusersetup"!==this.child_prop)for(var n in i)for(var s in e)s===n&&(i[n]=e[s]);this.showProcessing=!0,this.dataService.UpdateConfigurations(i,this.primay_prop,this.child_prop).subscribe((function(e){t.coreActions.Notify("error"===e.status?{title:e.message,text:"",css:"bg-success"}:{title:"Settings Updated",text:"",css:"bg-success"}),t.showProcessing=!1,1===t.SetupType?t._nextForm():t.finalstep=!0}),(function(e){t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"}),t.showProcessing=!1}))}},{key:"SkipForm",value:function(e){this._nextForm()}},{key:"_nextForm",value:function(){this.stepIndex<this.child_prop_steps.length-1?(this.stepIndex++,this.renderForm(this.primary_prop_steps[this.stepIndex],this.child_prop_steps[this.stepIndex])):(this.finalstep=!0,this.dataService.SetupCompleted())}}]),e}()).\u0275fac=function(e){return new(e||O)(r.Mb(u.a),r.Mb(d.a),r.Mb(l.a),r.Mb(b.a),r.Mb(f.a),r.Mb(h.a))},O.\u0275cmp=r.Gb({type:O,selectors:[["app-setup"]],inputs:{SetupType:"SetupType"},decls:9,vars:6,consts:[[1,"container","setup-container"],[1,"row","justify-content-md-center"],[1,"col-md-8","col-sm-12"],[1,"card"],[1,"card-body"],[4,"ngIf"],[1,"m-b-20","text-center"],["class","m-b-0 m-l-10",4,"ngIf"],[1,"m-b-20"],[1,"red"],[1,"m-b-0","m-l-10"],[1,"m-b-20","m-t-0"],[3,"controls","showCancel","skipBtnText","showModal","submitText","OnSubmit","OnSkip",4,"ngIf"],[3,"controls","showCancel","skipBtnText","showModal","submitText","OnSubmit","OnSkip"],[1,"m-t-20","m-b-5"],[1,"m-t-20","m-b-20"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.Sb(4,"div",4),r.Gc(5,S,1,0,"app-loader",5),r.hc(6,"async"),r.Gc(7,k,13,5,"div",5),r.hc(8,"async"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.zb(5),r.nc("ngIf",r.ic(6,2,t.loading$)),r.zb(2),r.nc("ngIf",!r.ic(8,4,t.loading$)))},directives:[n.o,g.a,m.a],pipes:[n.b],encapsulation:2}),Object(c.a)([Object(p.e)(["configurations","configurations"])],O.prototype,"Configurations$",void 0),Object(c.a)([Object(p.e)(["configurations","loading"])],O.prototype,"loading$",void 0),Object(c.a)([Object(p.e)(["configurations","isloaded"])],O.prototype,"isloaded$",void 0),O),j=((G=function e(t){_classCallCheck(this,e),this.config=t,this.SetupType=0,this.SetupType=parseInt(this.config.getGlobalVar("setuptype"),10)}).\u0275fac=function(e){return new(e||G)(r.Mb(a.a))},G.\u0275cmp=r.Gb({type:G,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"SetupType"]],template:function(e,t){1&e&&r.Nb(0,"app-setup",0),2&e&&r.nc("SetupType",t.SetupType)},directives:[z],encapsulation:2}),G),M=i("o+qO"),F=((P=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:P}),P.\u0275inj=r.Jb({factory:function(e){return new(e||P)},providers:[u.a,d.a,h.a,f.a,l.a,b.a],imports:[[n.c,M.a,o.g,s.i,s.u]]}),P);i.d(t,"SetupModule",(function(){return $}));var N,H=[{path:"",data:{title:"Setup Application",urls:[{title:"Setup Application"}]},component:j}],$=((N=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:N}),N.\u0275inj=r.Jb({factory:function(e){return new(e||N)},imports:[[s.i,n.c,M.a,o.g.forChild(H),F]]}),N)}}]);